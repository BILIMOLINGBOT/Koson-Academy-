<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Darslar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA style -->
  <meta name="theme-color" content="#4da3e2">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #ededed;
    }

    /* Header */
    .header {
      background: #fff;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
    }

    .header h2 {
      margin: 0;
      font-size: 20px;
    }

    /* Stats */
    .stats {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    /* Main content */
    .container {
      padding: 16px;
    }

    /* Stats summary */
    .stats-summary {
      background: white;
      border-radius: 15px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .stats-summary h3 {
      margin: 0 0 10px 0;
      color: #333;
    }

    .overall-progress {
      width: 100%;
      height: 12px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .overall-fill {
      height: 100%;
      width: 0;
      background: #4da3e2;
      border-radius: 10px;
      transition: width 1s ease;
    }

    .completed-text {
      color: #666;
      font-size: 14px;
    }

    /* Cards */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 15px;
    }

    .card {
      border-radius: 20px;
      padding: 20px;
      color: white;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      position: relative;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .card h3 {
      margin: 0;
      font-size: 18px;
    }

    .card-number {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 5px;
    }

    .percent-text {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }

    /* Progress bar */
    .progress-bg {
      width: 100%;
      height: 8px;
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-fill {
      height: 100%;
      width: 0;
      border-radius: 10px;
      background: white;
      transition: width 0.6s ease;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .cards-grid {
        grid-template-columns: 1fr;
      }
      
      .header h2 {
        font-size: 18px;
      }
      
      .stats {
        font-size: 14px;
      }
    }

    /* Loading animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card {
      animation: fadeIn 0.5s ease forwards;
    }
  </style>
</head>
<body>

  <div class="header">
    <h2>Darslar</h2>
    <div class="stats">
      <span>20 ðŸ”¥</span>
      <span>33 ðŸª™</span>
    </div>
  </div>

  <div class="container">
    
    <div class="stats-summary">
      <h3>Umumiy progress</h3>
      <div class="overall-progress">
        <div class="overall-fill" id="overallProgress"></div>
      </div>
      <div class="completed-text" id="completedLessons">0/30 darslar tugatildi</div>
    </div>

    <div class="cards-grid" id="cardsContainer">
      <!-- Cards will be generated by JavaScript -->
    </div>

  </div>

  <script>
    // Darslar ma'lumotlari - har bir dars uchun progress foizi
    const lessonsData = [
      { title: "Bo'lim 1: Kirish", percent: 50, color: "#f39c12" },
      { title: "Bo'lim 2: Asosiy tushunchalar", percent: 30, color: "#3498db" },
      { title: "Bo'lim 3: Amaliy mashqlar", percent: 60, color: "#2ecc71" },
      { title: "Bo'lim 4: Mavzuni chuqurlashtirish", percent: 10, color: "#9b59b6" },
      { title: "Bo'lim 5: Test va baholash", percent: 0, color: "#e74c3c" },
      { title: "Bo'lim 6: Qo'shimcha materiallar", percent: 20, color: "#1abc9c" },
      { title: "Bo'lim 7: Amaliyot", percent: 40, color: "#f1c40f" },
      { title: "Bo'lim 8: Mustahkamlash", percent: 70, color: "#e67e22" },
      { title: "Bo'lim 9: Yakuniy test", percent: 25, color: "#34495e" },
      { title: "Bo'lim 10: Loyiha", percent: 15, color: "#d35400" },
      { title: "Bo'lim 11: Tahlil", percent: 0, color: "#16a085" },
      { title: "Bo'lim 12: Muhokama", percent: 45, color: "#8e44ad" },
      { title: "Bo'lim 13: Yangi texnologiyalar", percent: 5, color: "#27ae60" },
      { title: "Bo'lim 14: Ijodiy yondashuv", percent: 80, color: "#c0392b" },
      { title: "Bo'lim 15: Jamoa ishi", percent: 65, color: "#2980b9" },
      { title: "Bo'lim 16: Tahlil va sintez", percent: 30, color: "#f39c12" },
      { title: "Bo'lim 17: Yangi imkoniyatlar", percent: 10, color: "#3498db" },
      { title: "Bo'lim 18: Amaliy loyiha", percent: 50, color: "#2ecc71" },
      { title: "Bo'lim 19: Natijalarni tahli qilish", percent: 35, color: "#9b59b6" },
      { title: "Bo'lim 20: Yangi bosqich", percent: 20, color: "#e74c3c" },
      { title: "Bo'lim 21: Malaka oshirish", percent: 75, color: "#1abc9c" },
      { title: "Bo'lim 22: Innovatsion yechimlar", percent: 40, color: "#f1c40f" },
      { title: "Bo'lim 23: Strategiya", percent: 55, color: "#e67e22" },
      { title: "Bo'lim 24: Monitoring", percent: 25, color: "#34495e" },
      { title: "Bo'lim 25: Optimizatsiya", percent: 45, color: "#d35400" },
      { title: "Bo'lim 26: Integratsiya", percent: 60, color: "#16a085" },
      { title: "Bo'lim 27: Yangi metodlar", percent: 30, color: "#8e44ad" },
      { title: "Bo'lim 28: Tajriba almashish", percent: 85, color: "#27ae60" },
      { title: "Bo'lim 29: Yakuniy baholash", percent: 20, color: "#c0392b" },
      { title: "Bo'lim 30: Sertifikat olish", percent: 0, color: "#2980b9" }
    ];

    const cardsContainer = document.getElementById('cardsContainer');
    const overallProgress = document.getElementById('overallProgress');
    const completedLessons = document.getElementById('completedLessons');

    // Umumiy progressni hisoblash
    function calculateOverallProgress() {
      let totalPercent = 0;
      let completedCount = 0;
      
      lessonsData.forEach(lesson => {
        totalPercent += lesson.percent;
        if (lesson.percent === 100) completedCount++;
      });
      
      const averagePercent = Math.round(totalPercent / lessonsData.length);
      const completedText = `${completedCount}/${lessonsData.length} darslar tugatildi`;
      
      return { averagePercent, completedText };
    }

    // Kartalarni yaratish
    function createCards() {
      const { averagePercent, completedText } = calculateOverallProgress();
      
      // Umumiy progressni yangilash
      setTimeout(() => {
        overallProgress.style.width = averagePercent + '%';
      }, 300);
      
      completedLessons.textContent = completedText;

      // Har bir dars uchun karta yaratish
      lessonsData.forEach((lesson, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.setAttribute('data-percent', lesson.percent);
        card.style.background = lesson.color;
        card.style.animationDelay = `${index * 0.05}s`;
        
        // Kartaga bosilganda dars sahifasiga o'tish
        card.onclick = () => {
          window.location.href = `dars${index + 1}.html`;
        };
        
        card.innerHTML = `
          <div class="card-number">Bo'lim ${index + 1}</div>
          <h3>${lesson.title}</h3>
          <div class="percent-text">% ${lesson.percent}</div>
          <div class="progress-bg">
            <div class="progress-fill"></div>
          </div>
        `;
        
        cardsContainer.appendChild(card);
      });
    }

    // Progress barlarni yangilash
    function animateProgressBars() {
      const cards = document.querySelectorAll('.card');
      
      cards.forEach((card, index) => {
        const percent = lessonsData[index].percent;
        const progress = card.querySelector('.progress-fill');
        
        // Har bir karta uchun progress boshqaruvchi
        setTimeout(() => {
          progress.style.width = percent + '%';
        }, 400 + (index * 100));
      });
    }

    // Dasturni ishga tushirish
    window.onload = function() {
      createCards();
      
      // Animatsiyalarni boshlash
      setTimeout(() => {
        animateProgressBars();
      }, 500);
      
      // Rangi past bo'lgan kartalarni ajratib ko'rsatish
      const cards = document.querySelectorAll('.card');
      cards.forEach((card, index) => {
        const percent = lessonsData[index].percent;
        
        // Agar progress juda past bo'lsa
        if (percent < 20) {
          card.style.opacity = '0.9';
          card.style.border = '2px solid rgba(255,255,255,0.5)';
        }
      });
    };

    // PWA funksiyalari
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>

</body>
</html>