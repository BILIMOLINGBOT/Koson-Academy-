<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test: Word Order</title>
  <style>
    body {
      font-family: sans-serif;
      background: #fff;
      color: #333;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .chip {
      padding: 10px 16px;
      background-color: #007bff;
      color: white;
      border-radius: 9999px;
      cursor: pointer;
      display: inline-block;
      margin: 5px;
      user-select: none;
      transition: transform 0.2s;
    }
    .chip:hover {
      transform: scale(1.05);
    }
    .chip.selected {
      opacity: 0.5;
      pointer-events: none;
    }
    .selected-words {
      margin: 20px 0;
      min-height: 50px;
    }
    .btn {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:disabled {
      background: #ccc;
    }
    #feedback {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>So‘zlarni tartiblash testi</h1>

  <div id="word-container"></div>
  <div class="selected-words" id="selected-words"></div>

  <button class="btn" id="check-btn" disabled>Tekshirish</button>
  <div id="feedback"></div>

  <!-- OVOZ -->
  <audio id="correct-audio" src="sounds/correct.mp3" preload="auto"></audio>
  <audio id="wrong-audio" src="sounds/wrong.mp3" preload="auto"></audio>

  <script>
    const questions = [
      ["I", "am", "a", "student"]
    ];

    let current = 0;
    let userAnswer = [];

    const wordContainer = document.getElementById("word-container");
    const selectedWords = document.getElementById("selected-words");
    const checkBtn = document.getElementById("check-btn");
    const feedback = document.getElementById("feedback");
    const correctAudio = document.getElementById("correct-audio");
    const wrongAudio = document.getElementById("wrong-audio");

    function shuffle(array) {
      return [...array].sort(() => Math.random() - 0.5);
    }

    function renderQuestion() {
      wordContainer.innerHTML = "";
      selectedWords.innerHTML = "";
      userAnswer = [];
      feedback.textContent = "";
      checkBtn.disabled = true;

      const words = shuffle(questions[current]);
      words.forEach(word => {
        const chip = document.createElement("div");
        chip.className = "chip";
        chip.textContent = word;
        chip.onclick = () => {
          chip.classList.add("selected");
          userAnswer.push(word);
          updateSelectedWords();
          if (userAnswer.length === questions[current].length) {
            checkBtn.disabled = false;
          }
        };
        wordContainer.appendChild(chip);
      });
    }

    function updateSelectedWords() {
      selectedWords.innerHTML = "";
      userAnswer.forEach((word, idx) => {
        const chip = document.createElement("div");
        chip.className = "chip";
        chip.textContent = word;
        chip.onclick = () => {
          userAnswer.splice(idx, 1);
          const chips = wordContainer.querySelectorAll(".chip");
          for (const c of chips) {
            if (c.textContent === word && c.classList.contains("selected")) {
              c.classList.remove("selected");
              break;
            }
          }
          updateSelectedWords();
          checkBtn.disabled = true;
        };
        selectedWords.appendChild(chip);
      });
    }

    checkBtn.onclick = () => {
      const correct = questions[current].join(" ");
      const attempt = userAnswer.join(" ");

      if (correct === attempt) {
        feedback.textContent = "✅ To‘g‘ri javob!";
        correctAudio.play();
      } else {
        feedback.textContent = "❌ Noto‘g‘ri javob!";
        wrongAudio.play();
      }
    };

    renderQuestion();
  </script>
</body>
</html>