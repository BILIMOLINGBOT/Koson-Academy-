<!DOCTYPE html><html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>"To Be" Fe'li Bilan Savollar</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      line-height: 1.8;
      max-width: 800px;
      margin: auto;
    }.highlight {
  border: 2px solid red;
  border-radius: 5px;
  padding: 2px;
}

.controls {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  background-color: #f0f0f0;
  border-radius: 30px;
  padding: 10px 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  z-index: 1000;
}

.controls button {
  font-size: 20px;
  padding: 5px 10px;
  border: none;
  background: none;
  cursor: pointer;
}

@media (prefers-color-scheme: dark) {
  body { background-color: #121212; color: #eee; }
  .controls { background-color: #333; color: #fff; }
}

  </style>
</head>
<body>
  <div id="content">
    <h1>"To Be" Fe'li Bilan Savollar</h1>
    <p>"To be" fe'li bilan savollar tuzish ingliz tilida juda oddiy va muhim grammatik qoidadir.</p>
    <p>Bu savollar odatda shaxsning, predmetning yoki vaziyatning holatini, kimligini, sifatini yoki joylashuvini so'rash uchun ishlatiladi.</p>
    <p>Masalan: <em>Are you happy?</em>, <em>Is he a student?</em></p>
  </div>  <div class="controls">
    <button onclick="playText()">▶️</button>
    <button onclick="pauseText()">⏸️</button>
    <button onclick="resetReading()">⏪</button>
  </div>  <script>
    const synth = window.speechSynthesis;
    const contentElement = document.getElementById('content');
    let words = [];
    let currentWordIndex = 0;
    let isPaused = false;

    // Wrap all words in span
    function wrapWords() {
      const walker = document.createTreeWalker(contentElement, NodeFilter.SHOW_TEXT);
      const textNodes = [];
      while (walker.nextNode()) textNodes.push(walker.currentNode);

      textNodes.forEach(node => {
        const parent = node.parentNode;
        const parts = node.textContent.split(/(\s+)/);
        const spans = parts.map(part => {
          if (part.trim() === '') return document.createTextNode(part);
          const span = document.createElement('span');
          span.textContent = part;
          span.dataset.word = "true";
          return span;
        });
        spans.forEach(span => parent.insertBefore(span, node));
        parent.removeChild(node);
      });

      words = [...document.querySelectorAll('[data-word]')];
    }

    function highlightWord(index) {
      words.forEach((w, i) => w.classList.toggle('highlight', i === index));
    }

    function playText() {
      if (isPaused && synth.paused) {
        synth.resume();
        return;
      }

      if (synth.speaking) return;

      const utterance = new SpeechSynthesisUtterance();
      let textToRead = words.slice(currentWordIndex).map(w => w.textContent).join(' ');
      utterance.text = textToRead;
      utterance.lang = 'en-US';

      utterance.onboundary = (event) => {
        if (event.name === 'word') {
          highlightWord(currentWordIndex);
          currentWordIndex++;
        }
      };

      utterance.onend = () => {
        highlightWord(-1);
        currentWordIndex = 0;
      };

      synth.speak(utterance);
    }

    function pauseText() {
      if (synth.speaking) {
        synth.pause();
        isPaused = true;
      }
    }

    function resetReading() {
      synth.cancel();
      highlightWord(-1);
      currentWordIndex = 0;
      isPaused = false;
    }

    wrapWords();
  </script></body>
</html>