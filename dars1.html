<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>1-Dars: Kirish</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- PWA style -->
  <meta name="theme-color" content="#4da3e2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Header */
    .lesson-header {
      background: white;
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .lesson-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, #667eea, #764ba2);
    }
    
    .lesson-title {
      font-size: 28px;
      color: #333;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    
    .lesson-subtitle {
      color: #666;
      font-size: 16px;
      margin-bottom: 20px;
    }
    
    .lesson-progress {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #f8f9fa;
      padding: 15px;
      border-radius: 15px;
      margin-top: 20px;
    }
    
    .progress-text {
      font-weight: 600;
      color: #444;
    }
    
    .progress-bar {
      width: 60%;
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      width: 25%;
      background: linear-gradient(90deg, #4da3e2, #3b82f6);
      border-radius: 5px;
      transition: width 0.5s ease;
    }
    
    /* Sections Grid */
    .sections-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .section-card {
      background: white;
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }
    
    .section-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
      border-color: #4da3e2;
    }
    
    .section-card.completed {
      border-color: #2ecc71;
      background: linear-gradient(to bottom right, #ffffff, #f0fff4);
    }
    
    .section-card.completed::after {
      content: '✓';
      position: absolute;
      top: 15px;
      right: 15px;
      background: #2ecc71;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .section-icon {
      width: 60px;
      height: 60px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      font-size: 24px;
      color: white;
    }
    
    .test-icon { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
    .video-icon { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
    .quiz-icon { background: linear-gradient(135deg, #ffe66d, #f9c74f); }
    .practice-icon { background: linear-gradient(135deg, #9b5de5, #7b2cbf); }
    
    .section-title {
      font-size: 22px;
      margin-bottom: 10px;
      color: #333;
    }
    
    .section-desc {
      color: #666;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    
    .section-meta {
      display: flex;
      justify-content: space-between;
      color: #888;
      font-size: 14px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }
    
    /* Navigation */
    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      padding: 20px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    
    .nav-btn {
      padding: 12px 25px;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
    }
    
    .btn-prev {
      background: #f8f9fa;
      color: #666;
    }
    
    .btn-prev:hover {
      background: #e9ecef;
    }
    
    .btn-next {
      background: linear-gradient(90deg, #4da3e2, #3b82f6);
      color: white;
    }
    
    .btn-next:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
    }
    
    .btn-disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-disabled:hover {
      transform: none;
      box-shadow: none;
    }
    
    /* Modal for sections */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal-content {
      background: white;
      border-radius: 25px;
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    
    .modal-header {
      padding: 25px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-size: 24px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .close-modal:hover {
      background: #f8f9fa;
    }
    
    .modal-body {
      padding: 25px;
    }
    
    /* Test styles */
    .test-container {
      padding: 20px;
    }
    
    .test-question {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
    }
    
    .question-text {
      font-size: 18px;
      margin-bottom: 15px;
      color: #333;
    }
    
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .option {
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .option:hover {
      background: #f0f7ff;
      border-color: #4da3e2;
    }
    
    .option.selected {
      background: #e3f2fd;
      border-color: #2196f3;
    }
    
    .option.correct {
      background: #e8f5e9;
      border-color: #4caf50;
    }
    
    .option.incorrect {
      background: #ffebee;
      border-color: #f44336;
    }
    
    .test-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    /* Video styles */
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      margin-bottom: 20px;
    }
    
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 10px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .sections-grid {
        grid-template-columns: 1fr;
      }
      
      .lesson-title {
        font-size: 24px;
        flex-direction: column;
        gap: 10px;
      }
      
      .navigation {
        flex-direction: column;
        gap: 15px;
      }
      
      .nav-btn {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  
  <div class="container">
    
    <!-- Lesson Header -->
    <div class="lesson-header">
      <div class="lesson-title">
        <i class="fas fa-book-open"></i>
        <h1>1-Dars: Kirish va asosiy tushunchalar</h1>
      </div>
      <p class="lesson-subtitle">Dasturlash dunyosiga kirish - dastlabki qadamlar</p>
      
      <div class="lesson-progress">
        <span class="progress-text">Progress: <span id="currentProgress">25%</span></span>
        <div class="progress-bar">
          <div class="progress-fill" id="lessonProgressFill"></div>
        </div>
        <span class="progress-text">1/4 bo'lim</span>
      </div>
    </div>
    
    <!-- Sections Grid -->
    <div class="sections-grid">
      
      <!-- Section 1: Test -->
      <div class="section-card" data-section="test" onclick="openSection('test')">
        <div class="section-icon test-icon">
          <i class="fas fa-clipboard-check"></i>
        </div>
        <h3 class="section-title">1. Test - Bilimingizni sinab ko'ring</h3>
        <p class="section-desc">
          Dars mavzusini tushunganingizni tekshirish uchun qisqa test.
          5 ta savol, har biri 2 ball. Kamida 60% to'plashingiz kerak.
        </p>
        <div class="section-meta">
          <span><i class="fas fa-clock"></i> 10 daqiqa</span>
          <span><i class="fas fa-star"></i> 10 ball</span>
          <span><i class="fas fa-check-circle" id="testStatusIcon"></i> Tugatilmagan</span>
        </div>
      </div>
      
      <!-- Section 2: Kino (Video dars) -->
      <div class="section-card" data-section="video" onclick="openSection('video')">
        <div class="section-icon video-icon">
          <i class="fas fa-play-circle"></i>
        </div>
        <h3 class="section-title">2. Video Dars - Ko'rib o'rganing</h3>
        <p class="section-desc">
          Darsning asosiy qismi. Dasturlashning asosiy tushunchalari haqida
          15 daqiqalik video dars. Videoni to'liq ko'rishingiz kerak.
        </p>
        <div class="section-meta">
          <span><i class="fas fa-clock"></i> 15 daqiqa</span>
          <span><i class="fas fa-video"></i> Video</span>
          <span><i class="fas fa-check-circle" id="videoStatusIcon"></i> Tugatilmagan</span>
        </div>
      </div>
      
      <!-- Section 3: Kino test (Video test) -->
      <div class="section-card" data-section="video-test" onclick="openSection('video-test')">
        <div class="section-icon quiz-icon">
          <i class="fas fa-question-circle"></i>
        </div>
        <h3 class="section-title">3. Video Test - Videoni tushundingizmi?</h3>
        <p class="section-desc">
          Videodan keyin bilimingizni mustahkamlang. Videoda berilgan
          mavzularga oid 3 ta savol. Videoni diqqat bilan ko'rishingiz kerak.
        </p>
        <div class="section-meta">
          <span><i class="fas fa-clock"></i> 5 daqiqa</span>
          <span><i class="fas fa-star"></i> 6 ball</span>
          <span><i class="fas fa-lock" id="videoTestStatusIcon"></i> Oldindan test talab qilinadi</span>
        </div>
      </div>
      
      <!-- Section 4: Amaliyot -->
      <div class="section-card" data-section="practice" onclick="openSection('practice')">
        <div class="section-icon practice-icon">
          <i class="fas fa-code"></i>
        </div>
        <h3 class="section-title">4. Amaliy Mashq - Qo'llang</h3>
        <p class="section-desc">
          O'rgangan bilimlaringizni amalda qo'llash. Interaktiv mashqlar
          va kod yozish vazifalari. Darsni yakunlovchi bo'lim.
        </p>
        <div class="section-meta">
          <span><i class="fas fa-clock"></i> 20 daqiqa</span>
          <span><i class="fas fa-star"></i> 20 ball</span>
          <span><i class="fas fa-lock" id="practiceStatusIcon"></i> Video test talab qilinadi</span>
        </div>
      </div>
      
    </div>
    
    <!-- Navigation -->
    <div class="navigation">
      <button class="nav-btn btn-prev" onclick="goToPreviousLesson()">
        <i class="fas fa-arrow-left"></i>
        Oldingi dars
      </button>
      
      <div style="text-align: center; padding: 10px; color: #666;">
        <i class="fas fa-info-circle"></i>
        Bo'limlarni ketma-ket bajarishingiz kerak
      </div>
      
      <button class="nav-btn btn-next" onclick="goToNextLesson()" id="nextLessonBtn">
        Keyingi dars
        <i class="fas fa-arrow-right"></i>
      </button>
    </div>
    
  </div>
  
  <!-- Modal for sections -->
  <div class="modal" id="sectionModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">
          <i class="fas fa-clipboard-check"></i>
          Test
        </div>
        <button class="close-modal" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Content will be loaded here -->
      </div>
    </div>
  </div>
  
  <script>
    // Lesson state
    const lessonState = {
      testCompleted: false,
      videoCompleted: false,
      videoTestCompleted: false,
      practiceCompleted: false,
      progress: 25 // 1 of 4 sections = 25%
    };
    
    // Test questions
    const testQuestions = [
      {
        question: "Dasturlash nima?",
        options: [
          "Kompyuterga vazifa bajarishni o'rgatish",
          "Kompyuter o'yinlari o'ynash",
          "Internetdan foydalanish",
          "Rasmlar yaratish"
        ],
        correct: 0,
        selected: null
      },
      {
        question: "Qaysi biri dasturlash tili emas?",
        options: ["Python", "JavaScript", "HTML", "Java"],
        correct: 2,
        selected: null
      },
      {
        question: "Dasturlashni o'rganish qaysi sohada foydali?",
        options: [
          "Veb-sayt yaratishda",
          "Mobil ilovalar yaratishda", 
          "Ma'lumotlarni tahlil qilishda",
          "Barchasi to'g'ri"
        ],
        correct: 3,
        selected: null
      },
      {
        question: "Dastur yozishda birinchi qadam nima?",
        options: [
          "Muammoni tushunish",
          "Kod yozishni boshlash",
          "Kompyuterni yoqish",
          "Internetga ulanish"
        ],
        correct: 0,
        selected: null
      },
      {
        question: "Qaysi biri algoritmning xususiyati?",
        options: [
          "Aniqlik",
          "Cheksizlik",
          "Tasodifiylik",
          "Murakkablik"
        ],
        correct: 0,
        selected: null
      }
    ];
    
    // Video test questions
    const videoTestQuestions = [
      {
        question: "Videoda qaysi dasturlash tili haqida gapirildi?",
        options: ["Python", "JavaScript", "C++", "PHP"],
        correct: 0,
        selected: null
      },
      {
        question: "Dasturlashda 'sintaksis' nima?",
        options: [
          "Kod yozish qoidalari",
          "Dastur nomi",
          "Kompyuter modeli",
          "Dastur narxi"
        ],
        correct: 0,
        selected: null
      },
      {
        question: "Videoda ko'rsatilgan birinchi dastur nima chiqaradi?",
        options: ["'Salom Dunyo!'", "'Hello'", "'Test'", "'Boshladik'"],
        correct: 0,
        selected: null
      }
    ];
    
    // Update progress
    function updateProgress() {
      let completedCount = 0;
      if (lessonState.testCompleted) completedCount++;
      if (lessonState.videoCompleted) completedCount++;
      if (lessonState.videoTestCompleted) completedCount++;
      if (lessonState.practiceCompleted) completedCount++;
      
      lessonState.progress = (completedCount / 4) * 100;
      
      // Update UI
      document.getElementById('currentProgress').textContent = `${Math.round(lessonState.progress)}%`;
      document.getElementById('lessonProgressFill').style.width = `${lessonState.progress}%`;
      
      // Update section cards
      updateSectionCards();
      
      // Update next lesson button
      const nextBtn = document.getElementById('nextLessonBtn');
      if (lessonState.progress === 100) {
        nextBtn.classList.remove('btn-disabled');
      } else {
        nextBtn.classList.add('btn-disabled');
      }
    }
    
    // Update section cards appearance
    function updateSectionCards() {
      const testCard = document.querySelector('[data-section="test"]');
      const videoCard = document.querySelector('[data-section="video"]');
      const videoTestCard = document.querySelector('[data-section="video-test"]');
      const practiceCard = document.querySelector('[data-section="practice"]');
      
      // Test card
      if (lessonState.testCompleted) {
        testCard.classList.add('completed');
        document.getElementById('testStatusIcon').className = 'fas fa-check-circle';
        document.getElementById('testStatusIcon').parentElement.innerHTML = '<i class="fas fa-check-circle"></i> Tugatildi';
      }
      
      // Video card
      if (lessonState.videoCompleted) {
        videoCard.classList.add('completed');
        document.getElementById('videoStatusIcon').className = 'fas fa-check-circle';
        document.getElementById('videoStatusIcon').parentElement.innerHTML = '<i class="fas fa-check-circle"></i> Tugatildi';
      }
      
      // Video test card
      const videoTestStatus = document.getElementById('videoTestStatusIcon');
      if (lessonState.videoTestCompleted) {
        videoTestCard.classList.add('completed');
        videoTestStatus.className = 'fas fa-check-circle';
        videoTestStatus.parentElement.innerHTML = '<i class="fas fa-check-circle"></i> Tugatildi';
      } else if (lessonState.videoCompleted) {
        videoTestCard.classList.remove('locked');
        videoTestStatus.className = 'fas fa-play-circle';
        videoTestStatus.parentElement.innerHTML = '<i class="fas fa-play-circle"></i> Boshlash mumkin';
      }
      
      
      // Practice card
      const practiceStatus = document.getElementById('practiceStatusIcon');
      if (lessonState.practiceCompleted) {
        practiceCard.classList.add('completed');
        practiceStatus.className = 'fas fa-check-circle';
        practiceStatus.parentElement.innerHTML = '<i class="fas fa-check-circle"></i> Tugatildi';
      } else if (lessonState.videoTestCompleted) {
        practiceCard.classList.remove('locked');
        practiceStatus.className = 'fas fa-play-circle';
        practiceStatus.parentElement.innerHTML = '<i class="fas fa-play-circle"></i> Boshlash mumkin';
      }
    }
    
    // Open section modal
    function openSection(section) {
      const modal = document.getElementById('sectionModal');
      const modalTitle = document.getElementById('modalTitle');
      const modalBody = document.getElementById('modalBody');
      
      // Check prerequisites
      if (section === 'video-test' && !lessonState.videoCompleted) {
        alert('Iltimos, avval video darsni koʻrib chiqing!');
        return;
      }
      
      if (section === 'practice' && !lessonState.videoTestCompleted) {
        alert('Iltimos, avval video testni bajaring!');
        return;
      }
      
      // Load section content
      switch(section) {
        case 'test':
          modalTitle.innerHTML = '<i class="fas fa-clipboard-check"></i> Test - Bilimingizni sinab ko\'ring';
          modalBody.innerHTML = createTestContent();
          break;
          
        case 'video':
          modalTitle.innerHTML = '<i class="fas fa-play-circle"></i> Video Dars';
          modalBody.innerHTML = createVideoContent();
          break;
          
        case 'video-test':
          modalTitle.innerHTML = '<i class="fas fa-question-circle"></i> Video Test';
          modalBody.innerHTML = createVideoTestContent();
          break;
          
        case 'practice':
          modalTitle.innerHTML = '<i class="fas fa-code"></i> Amaliy Mashq';
          modalBody.innerHTML = createPracticeContent();
          break;
      }
      
      modal.style.display = 'flex';
    }
    
    // Create test content
    function createTestContent() {
      let html = `
        <div class="test-container">
          <h3 style="margin-bottom: 20px; color: #333;">Testni bajaring (5 ta savol)</h3>
          <p style="margin-bottom: 20px; color: #666;">Har bir savolga javob bering. Kamida 3 ta savolga to'g'ri javob berishingiz kerak.</p>
      `;
      
      testQuestions.forEach((q, index) => {
        html += `
          <div class="test-question">
            <div class="question-text">${index + 1}. ${q.question}</div>
            <div class="options">
        `;
        
        q.options.forEach((option, optIndex) => {
          const isSelected = q.selected === optIndex;
          html += `
            <div class="option ${isSelected ? 'selected' : ''}" 
                 onclick="selectTestOption(${index}, ${optIndex})">
              ${option}
            </div>
          `;
        });
        
        html += `</div></div>`;
      });
      
      html += `
          <div class="test-controls">
            <button class="nav-btn btn-prev" onclick="closeModal()">
              <i class="fas fa-times"></i>
              Bekor qilish
            </button>
            <button class="nav-btn btn-next" onclick="submitTest()">
              <i class="fas fa-paper-plane"></i>
              Testni yakunlash
            </button>
          </div>
        </div>
      `;
      
      return html;
    }
    
    // Create video content
    function createVideoContent() {
      return `
        <div style="padding: 20px;">
          <h3 style="margin-bottom: 20px; color: #333;">Video Dars: Dasturlash asoslari</h3>
          
          <div class="video-container">
            <!-- YouTube video placeholder - replace with actual video -->
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
            </iframe>
          </div>
          
          <div style="margin-top: 20px;">
            <h4>Video mazmuni:</h4>
            <ul style="margin: 10px 0 20px 20px; color: #666;">
              <li>Dasturlash nima?</li>
              <li>Dasturlash tillari turlari</li>
              <li>Birinchi dastur yozish</li>
              <li>Algoritm tushunchasi</li>
            </ul>
          </div>
          
          <div class="test-controls">
            <button class="nav-btn btn-prev" onclick="closeModal()">
              <i class="fas fa-times"></i>
              Chiqish
            </button>
            <button class="nav-btn btn-next" onclick="completeVideo()">
              <i class="fas fa-check-circle"></i>
              Videoni ko'rdim
            </button>
          </div>
        </div>
      `;
    }
    
    // Create video test content
    function createVideoTestContent() {
      let html = `
        <div class="test-container">
          <h3 style="margin-bottom: 20px; color: #333;">Video Test (3 ta savol)</h3>
          <p style="margin-bottom: 20px; color: #666;">Videoda ko'rgan mavzular bo'yicha savollarga javob bering.</p>
      `;
      
      videoTestQuestions.forEach((q, index) => {
        html += `
          <div class="test-question">
            <div class="question-text">${index + 1}. ${q.question}</div>
            <div class="options">
        `;
        
        q.options.forEach((option, optIndex) => {
          const isSelected = q.selected === optIndex;
          html += `
            <div class="option ${isSelected ? 'selected' : ''}" 
                 onclick="selectVideoTestOption(${index}, ${optIndex})">
              ${option}
            </div>
          `;
        });
        
        html += `</div></div>`;
      });
      
      html += `
          <div class="test-controls">
            <button class="nav-btn btn-prev" onclick="closeModal()">
              <i class="fas fa-times"></i>
              Bekor qilish
            </button>
            <button class="nav-btn btn-next" onclick="submitVideoTest()">
              <i class="fas fa-paper-plane"></i>
              Testni yakunlash
            </button>
          </div>
        </div>
      `;
      
      return html;
    }
    
    // Create practice content
    function createPracticeContent() {
      return `
        <div style="padding: 20px;">
          <h3 style="margin-bottom: 20px; color: #333;">Amaliy Mashqlar</h3>
          
          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
            <h4 style="margin-bottom: 15px;">Mashq 1: Birinchi dastur</h4>
            <p style="margin-bottom: 15px; color: #666;">Quyidagi kodni to'g'rilang va "Salom Dunyo!" chiqaradigan qiling:</p>
            
            <div style="background: #2d2d2d; color: #fff; padding: 15px; border-radius: 10px; margin-bottom: 15px; font-family: monospace;">
              <span style="color: #6699cc;">print</span>(<span style="color: #99cc99;">"Hello"</span>)
            </div>
            
            <div style="display: flex; gap: 10px;">
              <input type="text" id="codeAnswer" placeholder="To'g'ri kodni kiriting" 
                     style="flex: 1; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
              <button onclick="checkCode()" style="padding: 10px 20px; background: #4da3e2; color: white; border: none; border-radius: 8px; cursor: pointer;">
                Tekshirish
              </button>
            </div>
          </div>
          
          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
            <h4 style="margin-bottom: 15px;">Mashq 2: O'zgaruvchi yaratish</h4>
            <p style="margin-bottom: 15px; color: #666;">"ism" nomli o'zgaruvchi yarating va unga o'z ismingizni yuklang:</p>
            
            <select id="variableAnswer" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px;">
              <option value="">Tanlang</option>
              <option value="correct">ism = "SizningIsmingiz"</option>
              <option value="wrong1">var ism = "SizningIsmingiz"</option>
              <option value="wrong2">let "ism" = SizningIsmingiz</option>
              <option value="wrong3">ism: "SizningIsmingiz"</option>
            </select>
            
            <button onclick="checkVariable()" style="padding: 10px 20px; background: #4da3e2; color: white; border: none; border-radius: 8px; cursor: pointer;">
              Tekshirish
            </button>
          </div>
          
          <div class="test-controls">
            <button class="nav-btn btn-prev" onclick="closeModal()">
              <i class="fas fa-times"></i>
              Chiqish
            </button>
            <button class="nav-btn btn-next" id="completePracticeBtn" disabled onclick="completePractice()">
              <i class="fas fa-check-circle"></i>
              Mashqlarni yakunlash
            </button>
          </div>
        </div>
      `;
    }
    
    // Close modal
    function closeModal() {
      document.getElementById('sectionModal').style.display = 'none';
    }
    
    // Test functions
    function selectTestOption(questionIndex, optionIndex) {
      testQuestions[questionIndex].selected = optionIndex;
      
      // Update UI
      const options = document.querySelectorAll(`.test-question:nth-child(${questionIndex + 1}) .option`);
      options.forEach((opt, idx) => {
        opt.classList.remove('selected');
        if (idx === optionIndex) {
          opt.classList.add('selected');
        }
      });
    }
    
    function selectVideoTestOption(questionIndex, optionIndex) {
      videoTestQuestions[questionIndex].selected = optionIndex;
      
      // Update UI
      const options = document.querySelectorAll(`.test-question:nth-child(${questionIndex + 1}) .option`);
      options.forEach((opt, idx) => {
        opt.classList.remove('selected');
        if (idx === optionIndex) {
          opt.classList.add('selected');
        }
      });
    }
    
    function submitTest() {
      let correctCount = 0;
      
      testQuestions.forEach((q, index) => {
        const options = document.querySelectorAll(`.test-question:nth-child(${index + 1}) .option`);
        
        if (q.selected === q.correct) {
          correctCount++;
          options.forEach((opt, idx) => {
            if (idx === q.correct) {
              opt.classList.add('correct');
            }
          });
        } else {
          options.forEach((opt, idx) => {
            if (idx === q.correct) {
              opt.classList.add('correct');
            }
            if (idx === q.selected && q.selected !== null) {
              opt.classList.add('incorrect');
            }
          });
        }
      });
      
      const percentage = (correctCount / testQuestions.length) * 100;
      
      if (percentage >= 60) {
        setTimeout(() => {
          alert(`Tabriklaymiz! Testdan ${percentage}% ball oldingiz.`);
          lessonState.testCompleted = true;
          updateProgress();
          closeModal();
        }, 500);
      } else {
        setTimeout(() => {
          alert(`Testdan ${percentage}% ball oldingiz. Kamida 60% kerak. Qayta urinib ko'ring.`);
        }, 500);
      }
    }
    
    function submitVideoTest() {
      let correctCount = 0;
      
      videoTestQuestions.forEach((q, index) => {
        const options = document.querySelectorAll(`.test-question:nth-child(${index + 1}) .option`);
        
        if (q.selected === q.correct) {
          correctCount++;
        }
        
        options.forEach((opt, idx) => {
          if (idx === q.correct) {
            opt.classList.add('correct');
          }
          if (idx === q.selected && q.selected !== null && idx !== q.correct) {
            opt.classList.add('incorrect');
          }
        });
      });
      
      const percentage = (correctCount / videoTestQuestions.length) * 100;
      
      if (percentage >= 60) {
        setTimeout(() => {
          alert(`Tabriklaymiz! Video testdan ${percentage}% ball oldingiz.`);
          lessonState.videoTestCompleted = true;
          updateProgress();
          closeModal();
        }, 500);
      } else {
        setTimeout(() => {
          alert(`Video testdan ${percentage}% ball oldingiz. Kamida 60% kerak. Videoni qayta ko'rib chiqing.`);
        }, 500);
      }
    }
    
    // Video completion
    function completeVideo() {
      lessonState.videoCompleted = true;
      alert('Video dars muvaffaqiyatli tugatildi!');
      updateProgress();
      closeModal();
    }
    
    // Practice functions
    function checkCode() {
      const answer = document.getElementById('codeAnswer').value.trim();
      const correctAnswer = 'print("Salom Dunyo!")';
      
      if (answer === correctAnswer) {
        alert('Toʻgʻri! Kod muvaffaqiyatli ishlaydi.');
        document.getElementById('completePracticeBtn').disabled = false;
      } else {
        alert('Notoʻgʻri. print("Salom Dunyo!") deb yozishingiz kerak.');
      }
    }
    
    function checkVariable() {
      const answer = document.getElementById('variableAnswer').value;
      
      if (answer === 'correct') {
        alert('Toʻgʻri! Oʻzgaruvchi muvaffaqiyatli yaratildi.');
        document.getElementById('completePracticeBtn').disabled = false;
      } else {
        alert('Notoʻgʻri. Pythonda oʻzgaruvchi yaratish: ism = "Qiymat"');
      }
    }
    
    function completePractice() {
      lessonState.practiceCompleted = true;
      alert('Amaliy mashqlar muvaffaqiyatli tugatildi! 1-dars yakunlandi.');
      updateProgress();
      closeModal();
    }
    
    // Navigation functions
    function goToPreviousLesson() {
      // Go back to lessons list
      window.location.href = 'index.html';
    }
    
    function goToNextLesson() {
      if (lessonState.progress === 100) {
        // Go to next lesson
        alert('2-darsga o\'tish...');
        window.location.href = 'dars2.html';
      } else {
        alert('Iltimos, avval barcha 4 ta boʻlimni tugating!');
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      updateProgress();
    });
  </script>
  
</body>
</html>