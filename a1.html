<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A1 Darslari</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background-color: #ffffff;
      color: #333;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body.dark-mode {
      background-color: #222;
      color: #f4f4f4;
    }
    .back-btn {
      display: inline-block;
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      margin-bottom: 15px;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    .back-btn:hover {
      background-color: #0056b3;
    }
    h1 {
      text-align: center;
    }
    #progress-container {
      width: 100%;
      background-color: #ddd;
      border-radius: 10px;
      overflow: hidden;
      margin: 20px 0;
    }
    #progress-bar {
      width: 0%;
      height: 20px;
      background-color: #007bff;
      transition: width 0.3s ease;
    }
    .lesson-btn {
      display: block;
      margin: 10px 0;
      padding: 12px;
      text-align: center;
      background-color: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      font-size: 16px;
    }
    .lesson-btn:hover {
      background-color: #0056b3;
    }
    .locked {
      background-color: #ccc !important;
      color: #666 !important;
      cursor: not-allowed;
    }
    body.dark-mode .lesson-btn {
      background-color: #3399ff;
      color: white;
    }
    body.dark-mode .lesson-btn.locked {
      background-color: #555 !important;
      color: #999 !important;
    }
    #score {
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <a href="index.html" class="back-btn">← Orqaga</a>
  <h1>A1 Darslari</h1>

  <div id="score">Ball: <span id="score-value">0</span></div>

  <div id="progress-container">
    <div id="progress-bar"></div>
  </div>

  <div id="lessons-list">
    <!-- Tugmalar avtomatik yaratildi -->
    <!-- dars1 dan dars36 gacha -->
    <script>
      const lessonNames = [
        "To be affirmative", "To be affirmative test",
        "To be question", "To be question test",
        "To be negative", "To be negative test",
        "Present continuous affirmative", "Present continuous affirmative test",
        "Present continuous question", "Present continuous question test",
        "Present continuous negative", "Present continuous negative test",
        "Present simple affirmative", "Present simple affirmative test",
        "Present simple question", "Present simple question test",
        "Present simple negative", "Present simple negative test",
        "I have / I have got affirmative", "I have / I have got affirmative test",
        "I have / I have got question", "I have / I have got question test",
        "I have / I have got negative", "I have / I have got negative test",
        "Past simple affirmative", "Past simple affirmative test",
        "Past simple question", "Past simple question test",
        "Past simple negative", "Past simple negative test",
        "Past continuous affirmative", "Past continuous affirmative test",
        "Past continuous question", "Past continuous question test",
        "Past continuous negative", "Past continuous negative test"
      ];

      for (let i = 0; i < lessonNames.length; i++) {
        const num = i + 1;
        const locked = num === 1 ? "" : " locked";
        const href = num === 1 ? `dars${num}.html` : "#";
        document.write(`<a href="${href}" class="lesson-btn${locked}" data-lesson="${num}">${lessonNames[i]}</a>`);
      }
    </script>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      document.body.classList.toggle('dark-mode', prefersDark.matches);
      prefersDark.addEventListener('change', e => {
        document.body.classList.toggle('dark-mode', e.matches);
      });

      const lessons = document.querySelectorAll('.lesson-btn');
      const progressBar = document.getElementById('progress-bar');
      const scoreValue = document.getElementById('score-value');

      let unlockedLesson = 1;
      let score = 0;

      lessons.forEach(button => {
        button.addEventListener('click', function (e) {
          const lessonNum = parseInt(this.dataset.lesson);

          if (lessonNum > unlockedLesson) {
            e.preventDefault();
            alert("Darslarni ketma-ket oʻrganish kerak");
            return;
          }

          // Ball va progress yangilash
          if (!this.classList.contains('visited')) {
            score += 10;
            scoreValue.textContent = score;
            const totalLessons = lessons.length;
            const progressPercent = Math.min((lessonNum / totalLessons) * 100, 100);
            progressBar.style.width = progressPercent + '%';

            this.classList.add('visited');

            // Keyingi darsni ochish
            if (unlockedLesson < totalLessons) {
              unlockedLesson++;
              const nextLesson = document.querySelector(`.lesson-btn[data-lesson="${unlockedLesson}"]`);
              if (nextLesson && nextLesson.classList.contains('locked')) {
                nextLesson.classList.remove('locked');
                nextLesson.href = `dars${unlockedLesson}.html`;
              }
            }
          }
        });
      });
    });
  </script>
</body>
</html>