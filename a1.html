<!DOCTYPE html><html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A1 Darslari - BilimSher</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="styles.min.css">
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #000000;
      --card-bg: #f0f8ff;
    }body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: Arial, sans-serif;
  padding: 1rem;
}

.lesson-list {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  max-width: 600px;
  margin: auto;
}

.lesson-btn {
  background-color: var(--card-bg);
  border: 2px solid #007bff;
  border-radius: 12px;
  padding: 1rem;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  transition: 0.3s;
  text-align: center;
}

.lesson-btn:hover:not(:disabled) {
  background-color: #e6f0ff;
  transform: scale(1.01);
}

.lesson-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

  </style>
</head>
<body>
  <h2 style="text-align:center; margin-bottom: 1.5rem;">A1 darajasi darslari</h2>
  <div class="lesson-list" id="a1LessonList">Yuklanmoqda...</div>  <script src="https://telegram.org/js/telegram-web-app.js"></script>  <script type="module">
    import { getUserProgress } from './progress.js';

    const lessons = [
      "To be affirmative",
      "To be affirmative test",
      "To be question",
      "To be question test",
      "To be negative",
      "To be negative test",
      "Present continues affirmative",
      "Present continues affirmative test",
      "Present continues question",
      "Present continues question test",
      "Present continues negative",
      "Present continues negative test",
      "Present simple affirmative",
      "Present simple affirmative test",
      "Present simple question",
      "Present simple question test",
      "Present simple negative",
      "Present simple negative test",
      "I have/I have got affirmative",
      "I have/I have got affirmative test",
      "I have/I have got question",
      "I have/I have got question test",
      "I have/I have got negative",
      "I have/I have got negative test",
      "Past simple affirmative",
      "Past simple affirmative test",
      "Past simple question",
      "Past simple question test",
      "Past simple negative",
      "Past simple negative test",
      "Past continuous affirmative",
      "Past continuous affirmative test",
      "Past continuous question",
      "Past continuous question test",
      "Past continuous negative",
      "Past continuous negative test"
    ];

    async function loadLessons() {
      const progress = await getUserProgress();
      const container = document.getElementById("a1LessonList");
      container.innerHTML = "";

      let canAccess = true;

      lessons.forEach((title, index) => {
        const id = `a1_lesson${index + 1}`;
        const isDone = progress[id] === true;

        const btn = document.createElement("button");
        btn.className = "lesson-btn";
        btn.textContent = title;

        if (canAccess) {
          btn.onclick = () => window.location.href = `${id}.html`;
        } else {
          btn.disabled = true;
          btn.onclick = () => alert("Darslarni ketma-ket o'rganish kerak");
        }

        if (!isDone) canAccess = false;

        container.appendChild(btn);
      });
    }

    // Dark mode detect
    const tg = window.Telegram.WebApp;
    const theme = tg.themeParams || {};

    if (theme.bg_color && parseInt(theme.bg_color, 16) < 0x888888) {
      document.documentElement.style.setProperty('--bg-color', `#${theme.bg_color}`);
      document.documentElement.style.setProperty('--text-color', `#${theme.text_color || "ffffff"}`);
      document.documentElement.style.setProperty('--card-bg', `#1f1f1f`);
    }

    window.addEventListener('DOMContentLoaded', loadLessons);
  </script></body>
</html>