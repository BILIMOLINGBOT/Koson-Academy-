<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Koson Academy - Ingliz tilini o'rganish uchun interaktiv platforma">
  <meta name="keywords" content="ingliz tili, o'quv platformasi, Koson Academy">
  <meta property="og:title" content="Koson Academy">
  <meta property="og:description" content="Ingliz tilini interaktiv darslar orqali o'rganing!">
  <meta property="og:image" content="/assets/images/logo.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="[invalid url, do not cite]
  <title>Koson Academy</title>
  <link href="[invalid url, do not cite] rel="stylesheet">
  <link rel="stylesheet" href="[invalid url, do not cite] integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERet7yg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
    body { background-color: #f5f5f5; color: #333; max-width: 500px; margin: 0 auto; padding-bottom: 100px; min-height: 100vh; }
    header, nav, section { display: block; }
    section { display: none; padding: 16px; }
    section.active { display: block; }
    .header { display: flex; align-items: center; justify-content: space-between; gap: 10px; padding: 16px; background-color: #e7f1ff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 10; }
    .logo { display: flex; align-items: center; gap: 8px; }
    .logo img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .logo span { font-weight: 700; font-size: 18px; color: #007bff; }
    .header-center { flex: 1; text-align: center; }
    .academy-name { font-weight: 700; font-size: 20px; color: #007bff; letter-spacing: 0.5px; }
    .points-display { background: linear-gradient(135deg, #34A853, #28a745); color: #fff; padding: 8px 16px; border-radius: 20px; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .points-display:hover { transform: scale(1.05); }
    .progress-container { background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 20px; transition: box-shadow 0.3s; }
    .progress-container:hover { box-shadow: 0 6px 16px rgba(0,0,0,0.12); }
    #completedLessonsCount { font-size: 16px; font-weight: 600; color: #1a1a1a; margin-bottom: 8px; }
    .progress-bar { width: 100%; height: 12px; background: #e0e0e0; border-radius: 6px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #34A853, #28a745); transition: width 0.5s ease-in-out; }
    .level-tabs { display: flex; background: #fff; border-radius: 12px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: box-shadow 0.3s; }
    .level-tabs:hover { box-shadow: 0 6px 16px rgba(0,0,0,0.12); }
    .level-tab { flex: 1; padding: 12px 0; text-align: center; cursor: pointer; font-weight: 700; border: none; background: #fff; transition: all 0.3s; }
    .level-tab.active { background: linear-gradient(135deg, #4285F4, #3267d6); color: #fff; }
    .level-tab:hover { background: #e7f1ff; }
    .level-content { display: none; }
    .level-content.active { display: block; }
    .level-title { font-size: 18px; font-weight: 700; margin-bottom: 12px; color: #4285F4; }
    .lesson-group { margin-bottom: 24px; }
    .lesson-group-title { font-size: 18px; font-weight: 600; color: #1a1a1a; padding-left: 8px; border-left: 4px solid #4285F4; margin-bottom: 12px; }
    .button-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; padding: 0 8px; }
    a.button { background: linear-gradient(135deg, #007bff, #0056b3); color: #fff; padding: 14px 20px; border-radius: 12px; text-align: center; font-size: 16px; font-weight: 600; text-decoration: none; border: none; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
    a.button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    a.button.closed { background-color: #e0e0e0; color: #666; cursor: not-allowed; }
    a.button.closed:hover { transform: none; box-shadow: none; }
    a.button.completed:after { content: '✔'; position: absolute; top: 8px; right: 12px; color: #34A853; font-size: 14px; }
    .navigation { display: flex; justify-content: space-around; background: #fff; padding: 12px 0; position: sticky; bottom: 0; left: 0; right: 0; max-width: 500px; margin: 0 auto; border-top: 1px solid #ddd; box-shadow: 0 -2px 8px rgba(0,0,0,0.05); z-index: 10; }
    .nav-item { display: flex; flex-direction: column; align-items: center; font-size: 12px; color: #555; cursor: pointer; padding: 8px; transition: transform 0.2s; }
    .nav-item.active, .nav-item:hover { color: #4285F4; transform: scale(1.1); }
    .nav-icon { font-size: 20px; margin-bottom: 4px; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
    @media (max-width: 500px) { .header, .navigation { max-width: 100%; padding: 12px; } a.button { min-width: 100%; } }
    @media (min-width: 768px) { .header, .navigation { max-width: 768px; } .button-container { grid-template-columns: repeat(2, minmax(260px, 1fr)); } }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <img id="userPhoto" src="[invalid url, do not cite] alt="Foydalanuvchi rasmi" loading="lazy">
      <span id="userName">Foydalanuvchi</span>
    </div>
    <div class="header-center">
      <span class="academy-name">Koson Academy</span>
    </div>
    <div class="points-display">
      <span id="userPoints">Ballar: 0</span>
    </div>
  </header>

  <main>
    <section id="home" class="active" aria-labelledby="home-title">
      <h2 id="home-title" class="sr-only">Asosiy sahifa</h2>
      <div class="progress-container">
        <div id="completedLessonsCount">Yakunlangan darslar: 0 / 36</div>
        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" aria-label="O'quv jarayoni foizi"></div></div>
      </div>
      <div class="level-tabs" role="tablist">
        <button class="level-tab active" data-level="a1" role="tab" aria-selected="true" aria-controls="a1-level">A1</button>
        <button class="level-tab" data-level="a2" role="tab" aria-selected="false" aria-controls="a2-level">A2</button>
        <button class="level-tab" data-level="b1" role="tab" aria-selected="false" aria-controls="b1-level">B1</button>
        <button class="level-tab" data-level="b2" role="tab" aria-selected="false" aria-controls="b2-level">B2</button>
      </div>
      <div id="a1-level" class="level-content active" role="tabpanel">
        <h2 class="level-title">Boshlang'ich (A1) Darslari</h2>
        <div class="lesson-group">
          <h3 class="lesson-group-title">To be fe'li</h3>
          <div class="button-container">
            <a href="lesson1.html" class="button" data-lesson-id="1" data-required="" aria-label="Darsga o'tish: To be affirmative">To be affirmative</a>
            <a href="lesson2.html" class="button closed" data-lesson-id="2" data-required="1" aria-label="Darsga o'tish: To be affirmative test">To be affirmative test</a>
            <a href="lesson3.html" class="button closed" data-lesson-id="3" data-required="2" aria-label="Darsga o'tish: To be question">To be question</a>
            <a href="lesson4.html" class="button closed" data-lesson-id="4" data-required="3" aria-label="Darsga o'tish: To be question test">To be question test</a>
            <a href="lesson5.html" class="button closed" data-lesson-id="5" data-required="4" aria-label="Darsga o'tish: To be negative">To be negative</a>
            <a href="lesson6.html" class="button closed" data-lesson-id="6" data-required="5" aria-label="Darsga o'tish: To be negative test">To be negative test</a>
          </div>
        </div>
        <div class="lesson-group">
          <h3 class="lesson-group-title">Present Continuous</h3>
          <div class="button-container">
            <a href="lesson7.html" class="button closed" data-lesson-id="7" data-required="6" aria-label="Darsga o'tish: Present continues affirmative">Present continues affirmative</a>
            <a href="lesson8.html" class="button closed" data-lesson-id="8" data-required="7" aria-label="Darsga o'tish: Present continues affirmative test">Present continues affirmative test</a>
            <a href="lesson9.html" class="button closed" data-lesson-id="9" data-required="8" aria-label="Darsga o'tish: Present continues question">Present continues question</a>
            <a href="lesson10.html" class="button closed" data-lesson-id="10" data-required="9" aria-label="Darsga o'tish: Present continues question test">Present continues question test</a>
            <a href="lesson11.html" class="button closed" data-lesson-id="11" data-required="10" aria-label="Darsga o'tish: Present continues negative">Present continues negative</a>
            <a href="lesson12.html" class="button closed" data-lesson-id="12" data-required="11" aria-label="Darsga o'tish: Present continues negative test">Present continues negative test</a>
          </div>
        </div>
        <div class="lesson-group">
          <h3 class="lesson-group-title">Present Simple</h3>
          <div class="button-container">
            <a href="lesson13.html" class="button closed" data-lesson-id="13" data-required="12" aria-label="Darsga o'tish: Present simple affirmative">Present simple affirmative</a>
            <a href="lesson14.html" class="button closed" data-lesson-id="14" data-required="13" aria-label="Darsga o'tish: Present simple affirmative test">Present simple affirmative test</a>
            <a href="lesson15.html" class="button closed" data-lesson-id="15" data-required="14" aria-label="Darsga o'tish: Present simple question">Present simple question</a>
            <a href="lesson16.html" class="button closed" data-lesson-id="16" data-required="15" aria-label="Darsga o'tish: Present simple question test">Present simple question test</a>
            <a href="lesson17.html" class="button closed" data-lesson-id="17" data-required="16" aria-label="Darsga o'tish: Present simple negative">Present simple negative</a>
            <a href="lesson18.html" class="button closed" data-lesson-id="18" data-required="17" aria-label="Darsga o'tish: Present simple negative test">Present simple negative test</a>
          </div>
        </div>
        <div class="lesson-group">
          <h3 class="lesson-group-title">I have/I have got</h3>
          <div class="button-container">
            <a href="lesson19.html" class="button closed" data-lesson-id="19" data-required="18" aria-label="Darsga o'tish: I have/I have got affirmative">I have/I have got affirmative</a>
            <a href="lesson20.html" class="button closed" data-lesson-id="20" data-required="19" aria-label="Darsga o'tish: I have/I have got affirmative test">I have/I have got affirmative test</a>
            <a href="lesson21.html" class="button closed" data-lesson-id="21" data-required="20" aria-label="Darsga o'tish: I have/I have got question">I have/I have got question</a>
            <a href="lesson22.html" class="button closed" data-lesson-id="22" data-required="21" aria-label="Darsga o'tish: I have/I have got question test">I have/I have got question test</a>
            <a href="lesson23.html" class="button closed" data-lesson-id="23" data-required="22" aria-label="Darsga o'tish: I have/I have got negative">I have/I have got negative</a>
            <a href="lesson24.html" class="button closed" data-lesson-id="24" data-required="23" aria-label="Darsga o'tish: I have/I have got negative test">I have/I have got negative test</a>
          </div>
        </div>
        <div class="lesson-group">
          <h3 class="lesson-group-title">Past Simple</h3>
          <div class="button-container">
            <a href="lesson25.html" class="button closed" data-lesson-id="25" data-required="24" aria-label="Darsga o'tish: Past simple affirmative">Past simple affirmative</a>
            <a href="lesson26.html" class="button closed" data-lesson-id="26" data-required="25" aria-label="Darsga o'tish: Past simple affirmative test">Past simple affirmative test</a>
            <a href="lesson27.html" class="button closed" data-lesson-id="27" data-required="26" aria-label="Darsga o'tish: Past simple question">Past simple question</a>
            <a href="lesson28.html" class="button closed" data-lesson-id="28" data-required="27" aria-label="Darsga o'tish: Past simple question test">Past simple question test</a>
            <a href="lesson29.html" class="button closed" data-lesson-id="29" data-required="28" aria-label="Darsga o'tish: Past simple negative">Past simple negative</a>
            <a href="lesson30.html" class="button closed" data-lesson-id="30" data-required="29" aria-label="Darsga o'tish: Past simple negative test">Past simple negative test</a>
          </div>
        </div>
        <div class="lesson-group">
          <h3 class="lesson-group-title">Past Continuous</h3>
          <div class="button-container">
            <a href="lesson31.html" class="button closed" data-lesson-id="31" data-required="30" aria-label="Darsga o'tish: Past continuous affirmative">Past continuous affirmative</a>
            <a href="lesson32.html" class="button closed" data-lesson-id="32" data-required="31" aria-label="Darsga o'tish: Past continuous affirmative test">Past continuous affirmative test</a>
            <a href="lesson33.html" class="button closed" data-lesson-id="33" data-required="32" aria-label="Darsga o'tish: Past continuous question">Past continuous question</a>
            <a href="lesson34.html" class="button closed" data-lesson-id="34" data-required="33" aria-label="Darsga o'tish: Past continuous question test">Past continuous question test</a>
            <a href="lesson35.html" class="button closed" data-lesson-id="35" data-required="34" aria-label="Darsga o'tish: Past continuous negative">Past continuous negative</a>
            <a href="lesson36.html" class="button closed" data-lesson-id="36" data-required="35" aria-label="Darsga o'tish: Past continuous negative test">Past continuous negative test</a>
          </div>
        </div>
      </div>
      <div id="a2-level" class="level-content" role="tabpanel">
        <h2 class="level-title">Elementar (A2) Darslari</h2>
        <div id="a2-lessons" class="button-container">
          <p>Tez orada qo'shiladi</p>
        </div>
      </div>
      <div id="b1-level" class="level-content" role="tabpanel">
        <h2 class="level-title">O'rta (B1) Darslari</h2>
        <div id="b1-lessons" class="button-container">
          <p>Tez orada qo'shiladi</p>
        </div>
      </div>
      <div id="b2-level" class="level-content" role="tabpanel">
        <h2 class="level-title">Yuqori O'rta (B2) Darslari</h2>
        <div id="b2-lessons" class="button-container">
          <p>Tez orada qo'shiladi</p>
        </div>
      </div>
    </section>

    <section id="lessons" aria-labelledby="lessons-title">
      <h2 id="lessons-title" class="sr-only">Darslar sahifasi</h2>
      <div class="lessons">
        <div id="lessonContainerForLessonsPage" class="button-container">
          <div class="skeleton-loader" aria-hidden="true"></div>
        </div>
      </div>
    </section>

    <section id="results" aria-labelledby="results-title">
      <h2 id="results-title">Sizning natijalaringiz</h2>
      <div class="results">
        <canvas id="progressChart" aria-label="Foydalanuvchi progressi grafigi"></canvas>
      </div>
    </section>

    <section id="settings" aria-labelledby="settings-title">
      <h2 id="settings-title">Sozlamalar</h2>
      <div class="settings">
        <div class="language-selector">
          <label for="language">Til:</label>
          <select id="language" aria-label="Interfeys tilini tanlash">
            <option value="uz">O'zbek</option>
            <option value="en">English</option>
            <option value="ru">Русский</option>
          </select>
        </div>
      </div>
    </section>
  </main>

  <nav class="navigation" role="navigation">
    <button class="nav-item active" data-target="home" role="button" aria-label="Asosiy sahifaga o'tish">
      <div class="nav-icon"><i class="fas fa-home"></i></div>
      <div>Asosiy</div>
    </button>
    <button class="nav-item" data-target="lessons" role="button" aria-label="Darslar sahifasiga o'tish">
      <div class="nav-icon"><i class="fas fa-book"></i></div>
      <div>Darslar</div>
    </button>
    <button class="nav-item" data-target="results" role="button" aria-label="Natijalar sahifasiga o'tish">
      <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
      <div>Natijalar</div>
    </button>
    <button class="nav-item" data-target="settings" role="button" aria-label="Sozlamalar sahifasiga o'tish">
      <div class="nav-icon"><i class="fas fa-cog"></i></div>
      <div>Sozlamalar</div>
    </button>
  </nav>

  <script src="[invalid url, do not cite]
  <script type="module">
    import { initializeApp } from "[invalid url, do not cite]
    import { getFirestore, collection, getDocs } from "[invalid url, do not cite]

    const firebaseConfig = {
      apiKey: "AIzaSyD0gBUJNcrgvvntcrfKK7Ky8t6_9Qb96Io",
      authDomain: "bilimilova-64833.firebaseapp.com",
      databaseURL: "[invalid url, do not cite]
      projectId: "bilimilova-64833",
      storageBucket: "bilimilova-64833.appspot.com",
      messagingSenderId: "890689414502",
      appId: "1:890689414502:web:8141d7aab413495c0c14a7",
      measurementId: "G-ZBC8X1VVMZ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Telegram foydalanuvchi ma'lumotlari';
<img id="userPhoto" src="https://via.placeholder.com/40" alt="Foydalanuvchi rasmi" loading="lazy">
<span id="userName">Foydalanuvchi</span>

<script>
  const tg = window.Telegram.WebApp;
  if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
    const user = tg.initDataUnsafe.user;
    document.getElementById('userName').textContent = user.first_name + (user.last_name ? ' ' + user.last_name : '');
    document.getElementById('userPhoto').src = user.photo_url;
  }
</script>
    // Navigatsiya
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('section').forEach(s => s.classList.remove('