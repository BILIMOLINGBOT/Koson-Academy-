<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>StoryLearn ‚Äî Hikoya orqali til o‚Äòrganish</title>
<style>
  :root {
    --bg-color: #0d0d0d;
    --text-color: #eaeaea;
    --accent: #00bfa5;
    --card-bg: #1a1a1a;
  }
  * {
    box-sizing: border-box;
    transition: all 0.3s ease;
  }
  body {
    margin: 0;
    font-family: "Poppins", sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
  }
  header {
    text-align: center;
    padding: 25px 10px;
    font-size: 1.5em;
    color: var(--accent);
    font-weight: 600;
    letter-spacing: 1px;
    animation: fadeDown 0.8s ease-out;
  }
  @keyframes fadeDown {
    from {opacity: 0; transform: translateY(-30px);}
    to {opacity: 1; transform: translateY(0);}
  }
  .story-container {
    background: var(--card-bg);
    border-radius: 20px;
    padding: 25px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    position: relative;
    animation: fadeUp 1s ease-in-out;
  }
  @keyframes fadeUp {
    from {opacity: 0; transform: translateY(40px);}
    to {opacity: 1; transform: translateY(0);}
  }
  .story-title {
    text-align: center;
    font-size: 1.3em;
    margin-bottom: 12px;
    color: var(--accent);
  }
  .story-text {
    line-height: 1.8;
    font-size: 1em;
    text-align: justify;
  }
  .story-text span {
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 6px;
  }
  .story-text span:hover {
    background: rgba(0,191,165,0.15);
    transition: background 0.2s ease-in;
  }
  .tooltip {
    position: absolute;
    background: var(--accent);
    color: #000;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 0.9em;
    transform: translate(-50%, -150%) scale(0.8);
    white-space: nowrap;
    opacity: 0;
    z-index: 10;
    transition: all 0.25s ease-out;
  }
  .tooltip.show {
    opacity: 1;
    transform: translate(-50%, -150%) scale(1);
  }

  .audio-player {
    margin-top: 25px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
  }
  .controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 18px;
  }
  button {
    background: var(--accent);
    border: none;
    border-radius: 50%;
    color: #000;
    width: 50px;
    height: 50px;
    font-size: 1.2em;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }
  button:hover {
    transform: scale(1.15);
    box-shadow: 0 0 10px var(--accent);
  }
  .speed-select {
    background: var(--card-bg);
    color: var(--accent);
    border: 1px solid var(--accent);
    border-radius: 10px;
    padding: 6px 12px;
    font-size: 0.9em;
  }
  .progress-container {
    width: 100%;
    height: 8px;
    background: #333;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }
  .progress-bar {
    width: 0;
    height: 100%;
    background: linear-gradient(90deg, #00bfa5, #26ffc2);
    transition: width 0.1s linear;
  }
  .time {
    font-size: 0.9em;
    color: #aaa;
  }
  .character-info {
    margin-top: 15px;
    font-size: 0.9em;
    opacity: 0.8;
    line-height: 1.5;
  }

  /* Yuklanish animatsiyasi */
  .loading {
    position: fixed;
    inset: 0;
    background: var(--bg-color);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
    animation: fadeOut 1s ease forwards;
    animation-delay: 1.5s;
  }
  .loader {
    width: 60px;
    height: 60px;
    border: 5px solid #222;
    border-top: 5px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {to {transform: rotate(360deg);}}
  @keyframes fadeOut {
    to {opacity: 0; visibility: hidden;}
  }
</style>
</head>
<body>
  <div class="loading"><div class="loader"></div></div>
  <header>üìñ StoryLearn</header>

  <div class="story-container">
    <h2 class="story-title">My Family üë®‚Äçüë©‚Äçüëß‚Äçüë¶</h2>
    <p class="story-text" id="storyText">
      <span data-uz="Mening">My</span> <span data-uz="oila">family</span> <span data-uz="men uchun juda muhim">is very important to me</span> 
      <span data-uz="chunki u menga">because it gives me</span> 
      <span data-uz="muhabbat,">love,</span> <span data-uz="qo‚Äòllab-quvvatlash,">support,</span> 
      <span data-uz="va baxt beradi.">and happiness.</span>
      <span data-uz="Bizning oilada">We are</span> <span data-uz="besh kishi bor:">five people in my family:</span> 
      <span data-uz="otam, onam,">my father, my mother,</span> 
      <span data-uz="opam, akam va men.">my sister, my brother, and me.</span> 
      <span data-uz="Bizning oila katta emas, lekin">My family is not very big, but</span> 
      <span data-uz="har doim birgamiz.">we are always together</span> 
      <span data-uz="yaxshi va yomon paytlarda.">in good and bad times.</span>
      <span data-uz="Otam o‚Äòqituvchi, onam hamshira.">My father is a teacher, and my mother is a nurse.</span> 
      <span data-uz="Ular mehnatkash va mehribon.">They are hardworking and kind people.</span>
    </p>

    <div class="tooltip" id="tooltip"></div>

    <div class="audio-player">
      <audio id="audio" src="https://www.englishlisteninghub.com/wp-content/uploads/2021/10/my-family.mp3"></audio>
      
      <div class="controls">
        <button id="backward">‚è™</button>
        <button id="playPause">‚ñ∂Ô∏è</button>
        <button id="forward">‚è©</button>
      </div>

      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>

      <div class="time" id="timeDisplay">0:00 / 0:00</div>

      <select class="speed-select" id="speedSelect">
        <option value="0.5">0.5x</option>
        <option value="0.75">0.75x</option>
        <option value="1" selected>1x</option>
        <option value="1.25">1.25x</option>
        <option value="1.5">1.5x</option>
        <option value="2">2x</option>
      </select>

      <div class="character-info">
        üë© <b>Mother:</b> Nurse<br />
        üë® <b>Father:</b> Teacher<br />
        üëß <b>Sister:</b> Student<br />
        üë¶ <b>Brother:</b> Student
      </div>
    </div>
  </div>

<script>
  const audio = document.getElementById('audio');
  const playPauseBtn = document.getElementById('playPause');
  const progressBar = document.getElementById('progressBar');
  const timeDisplay = document.getElementById('timeDisplay');
  const speedSelect = document.getElementById('speedSelect');
  const tooltip = document.getElementById('tooltip');
  const storyText = document.getElementById('storyText');
  const backwardBtn = document.getElementById('backward');
  const forwardBtn = document.getElementById('forward');

  let isPlaying = false;

  playPauseBtn.addEventListener('click', () => {
    if (isPlaying) {
      audio.pause();
      playPauseBtn.textContent = '‚ñ∂Ô∏è';
    } else {
      audio.play();
      playPauseBtn.textContent = '‚è∏Ô∏è';
    }
    isPlaying = !isPlaying;
  });

  audio.addEventListener('timeupdate', () => {
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = `${progress}%`;
    const current = formatTime(audio.currentTime);
    const total = formatTime(audio.duration);
    timeDisplay.textContent = `${current} / ${total}`;
  });

  audio.addEventListener('ended', () => {
    playPauseBtn.textContent = '‚ñ∂Ô∏è';
    isPlaying = false;
  });

  backwardBtn.addEventListener('click', () => audio.currentTime -= 5);
  forwardBtn.addEventListener('click', () => audio.currentTime += 5);
  speedSelect.addEventListener('change', () => {
    audio.playbackRate = parseFloat(speedSelect.value);
  });

  function formatTime(sec) {
    if (isNaN(sec)) return "0:00";
    const minutes = Math.floor(sec / 60);
    const seconds = Math.floor(sec % 60).toString().padStart(2, '0');
    return `${minutes}:${seconds}`;
  }

  // Tooltip smooth chiqishi
  storyText.addEventListener('click', (e) => {
    if (e.target.dataset.uz) {
      tooltip.textContent = e.target.dataset.uz;
      const rect = e.target.getBoundingClientRect();
      tooltip.style.left = `${rect.left + rect.width/2}px`;
      tooltip.style.top = `${rect.top + window.scrollY - 10}px`;
      tooltip.classList.add('show');
      setTimeout(() => tooltip.classList.remove('show'), 2000);
    }
  });
</script>
</body>
</html>