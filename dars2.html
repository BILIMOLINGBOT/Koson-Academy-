<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Language UI - Interactive Learning</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #000000;
            --text-secondary: #6c757d;
            --border-light: #e9ecef;
            --border-dark: #dee2e6;
            --accent-dark: #212529;
            --shadow-sm: rgba(0, 0, 0, 0.05);
            --shadow-md: rgba(0, 0, 0, 0.1);
            --shadow-lg: rgba(0, 0, 0, 0.15);
            --success: #28a745;
            --error: #dc3545;
            --speak-btn: #007bff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            background: var(--bg-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--text-primary);
            -webkit-tap-highlight-color: transparent;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: env(safe-area-inset-top) 20px env(safe-area-inset-bottom);
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        /* Markaziy qism */
        .question-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
            overflow-y: auto;
        }

        .question-card {
            background: var(--bg-primary);
            border-radius: 20px;
            padding: 30px 25px;
            box-shadow: 0 4px 20px var(--shadow-sm);
            max-width: 500px;
            width: 100%;
            margin-bottom: 30px;
            position: relative;
        }

        .question-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            font-size: 24px;
            font-weight: 600;
            line-height: 1.4;
            color: var(--text-primary);
            margin-bottom: 8px;
            min-height: 80px;
        }

        .question-hint {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 12px;
            font-style: italic;
        }

        /* Speak button */
        .speak-btn-container {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
        }

        .speak-btn {
            background: var(--speak-btn);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
        }

        .speak-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 123, 255, 0.4);
        }

        .speak-btn:active {
            transform: scale(0.95);
        }

        .speak-btn .icon {
            font-size: 24px;
        }

        /* Input area */
        .input-area {
            width: 100%;
            max-width: 500px;
        }

        .input-wrapper {
            position: relative;
            background: var(--bg-primary);
            border-radius: 16px;
            border: 2px solid var(--border-light);
            padding: 20px;
            box-shadow: 0 2px 12px var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .input-wrapper.focused {
            border-color: var(--text-primary);
            box-shadow: 0 4px 20px var(--shadow-md);
        }

        .input-wrapper.correct {
            border-color: var(--success);
            background: rgba(40, 167, 69, 0.05);
        }

        .input-wrapper.incorrect {
            border-color: var(--error);
            background: rgba(220, 53, 69, 0.05);
        }

        #userInput {
            width: 100%;
            border: none;
            outline: none;
            font-size: 20px;
            font-weight: 500;
            color: var(--text-primary);
            background: transparent;
            padding: 10px 0;
            font-family: inherit;
        }

        #userInput::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .char-count {
            position: absolute;
            bottom: 8px;
            right: 20px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Tugma qismi */
        .check-btn-area {
            padding: 20px 0 30px 0;
            max-width: 500px;
            width: 100%;
            margin: 0 auto;
        }

        .check-btn {
            width: 100%;
            height: 56px;
            border: none;
            border-radius: 16px;
            background: var(--border-dark);
            color: var(--text-secondary);
            font-size: 18px;
            font-weight: 600;
            cursor: not-allowed;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px var(--shadow-sm);
            letter-spacing: 0.3px;
        }

        .check-btn.active {
            background: var(--text-primary);
            color: var(--bg-primary);
            cursor: pointer;
            box-shadow: 0 8px 24px var(--shadow-lg);
            transform: translateY(-1px);
        }

        .check-btn.active:active {
            transform: translateY(0px);
            box-shadow: 0 4px 12px var(--shadow-md);
        }

        /* Natija paneli */
        .result-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--text-primary);
            border-radius: 24px 24px 0 0;
            padding: 30px 20px;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 1000;
            color: var(--bg-primary);
            box-shadow: 0 -4px 32px var(--shadow-lg);
        }

        .result-panel.active { 
            transform: translateY(0); 
        }

        .result-panel.success {
            background: var(--success);
        }

        .result-panel.error {
            background: var(--error);
        }

        .result-panel h2 {
            font-size: 28px;
            margin-bottom: 12px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .result-panel p {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .correct-answer {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            font-size: 18px;
            font-weight: 600;
        }

        .continue-btn {
            width: 100%;
            height: 56px;
            border: none;
            border-radius: 16px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 18px;
            font-weight: 600;
            margin-top: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 16px rgba(255, 255, 255, 0.1);
        }

        .continue-btn:active {
            transform: scale(0.98);
        }

        /* Progress indicator */
        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border-light);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--text-primary);
            transform: scale(1.2);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .shake { 
            animation: shake 0.4s ease; 
        }
    </style>
</head>
<body>

<div class="app-container">
    <!-- Question Section -->
    <div class="question-section">
        <div class="question-card">
            <div class="question-label">Eshiting va tarjima qiling</div>
            <div class="question-text" id="questionText">
                Quyidagi tugmani bosib gapni eshiting, so'ng tarjima qiling
            </div>
            <div class="question-hint" id="questionHint">
                Eshitilgan gapni o'zbek tiliga tarjima qiling
            </div>
        </div>

        <!-- Speak button -->
        <div class="speak-btn-container">
            <button class="speak-btn" id="speakBtn">
                <span class="icon">ðŸŽ¤</span>
            </button>
        </div>

        <div class="input-area">
            <div class="input-wrapper" id="inputWrapper">
                <input 
                    type="text" 
                    id="userInput" 
                    placeholder="Eshitgan gapingizni tarjima qilib yozing..."
                    autocomplete="off"
                    autocorrect="off"
                    spellcheck="false"
                >
                <div class="char-count" id="charCount">0</div>
            </div>
            <div class="keyboard-hint">ðŸ’¡ Eshitgan gapingizni yozing</div>
        </div>
    </div>

    <!-- Check Button -->
    <div class="check-btn-area">
        <button class="check-btn" id="checkBtn" disabled>Tekshirish</button>
    </div>

    <!-- Result Panel -->
    <div class="result-panel" id="resultPanel">
        <div style="max-width: 500px; margin: 0 auto;">
            <h2 id="resultTitle">Ajoyib! ðŸŽ‰</h2>
            <p id="resultMessage">Javobingiz to'g'ri!</p>
            <div class="correct-answer" id="correctAnswer" style="display: none;"></div>
            <button class="continue-btn" id="continueBtn">Keyingi savol â†’</button>
        </div>
    </div>
</div>

<script>
    // Empty array for dynamic questions
    const questions = [];
    let currentQuestion = 0;

    // DOM elements
    const input = document.getElementById('userInput');
    const inputWrapper = document.getElementById('inputWrapper');
    const checkBtn = document.getElementById('checkBtn');
    const resultPanel = document.getElementById('resultPanel');
    const charCount = document.getElementById('charCount');
    const questionText = document.getElementById('questionText');
    const questionHint = document.getElementById('questionHint');
    const speakBtn = document.getElementById('speakBtn');

    // Focus on input
    input.focus();
    
    input.addEventListener('focus', () => {
        inputWrapper.classList.add('focused');
    });

    input.addEventListener('blur', () => {
        inputWrapper.classList.remove('focused');
    });

    // Input handling
    input.addEventListener('input', (e) => {
        const val = e.target.value;
        charCount.textContent = val.length;
        
        const isReady = val.trim().length > 0;
        checkBtn.disabled = !isReady;
        checkBtn.classList.toggle('active', isReady);
    });

    // Speak button functionality
    speakBtn.addEventListener('click', () => {
        speakBtn.classList.add('pulse');
        
        // Show listening state
        questionText.textContent = "Eshityapman...";
        questionHint.textContent = "Iltimos, kuting...";
        
        // Simulate speech recognition
        setTimeout(() => {
            // Generate a random English sentence
            const sentences = [
                "The weather is beautiful today",
                "I like to read books",
                "Where is the nearest restaurant?",
                "Can you help me please?",
                "What time is it?",
                "How much does this cost?",
                "I need to practice more",
                "Learning languages is fun"
            ];
            
            const randomSentence = sentences[Math.floor(Math.random() * sentences.length)];
            const translations = {
                "The weather is beautiful today": "Bugun ob-havo juda chiroyli",
                "I like to read books": "Men kitob o'qishni yaxshi ko'raman",
                "Where is the nearest restaurant?": "Eng yaqin restoran qayerda?",
                "Can you help me please?": "Iltimos, menga yordam bera olasizmi?",
                "What time is it?": "Soat nechi bo'ldi?",
                "How much does this cost?": "Bu qancha turadi?",
                "I need to practice more": "Men ko'proq mashq qilishim kerak",
                "Learning languages is fun": "Tillarni o'rganish qiziqarli"
            };
            
            // Create a new question
            questions[currentQuestion] = {
                text: randomSentence,
                hint: "Eshitilgan gapni o'zbek tiliga tarjima qiling",
                answer: translations[randomSentence]
            };
            
            // Update display
            questionText.textContent = "Gapni eshiting: '" + randomSentence + "'";
            questionHint.textContent = "Endi tarjima qilib yozing";
            
            speakBtn.classList.remove('pulse');
            
            // Focus on input
            input.focus();
        }, 1500);
    });

    // Check answer
    checkBtn.addEventListener('click', () => {
        if (!questions[currentQuestion]) {
            showResult(false, "Avval gapni eshiting!");
            return;
        }
        
        const userAnswer = input.value.trim().toLowerCase();
        const correctAnswer = questions[currentQuestion].answer.toLowerCase();
        
        const isCorrect = userAnswer === correctAnswer;
        
        if (isCorrect) {
            showResult(true);
        } else {
            showResult(false);
        }
    });

    function showResult(isCorrect, customMessage = null) {
        const resultTitle = document.getElementById('resultTitle');
        const resultMessage = document.getElementById('resultMessage');
        const correctAnswerDiv = document.getElementById('correctAnswer');
        
        resultPanel.classList.remove('success', 'error');
        
        if (isCorrect) {
            resultPanel.classList.add('success');
            resultTitle.textContent = 'Ajoyib! ðŸŽ‰';
            resultMessage.textContent = customMessage || 'Javobingiz to\'g\'ri!';
            correctAnswerDiv.style.display = 'none';
        } else {
            resultPanel.classList.add('error');
            resultTitle.textContent = 'Xato! ðŸ˜”';
            resultMessage.textContent = customMessage || 'Qaytadan urinib ko\'ring.';
            
            if (questions[currentQuestion]) {
                correctAnswerDiv.style.display = 'block';
                correctAnswerDiv.textContent = `To'g'ri javob: ${questions[currentQuestion].answer}`;
            }
            
            inputWrapper.classList.add('shake');
            setTimeout(() => inputWrapper.classList.remove('shake'), 400);
        }
        
        resultPanel.classList.add('active');
    }

    // Continue to next question
    document.getElementById('continueBtn').addEventListener('click', () => {
        resultPanel.classList.remove('active');
        
        currentQuestion++;
        
        // Reset for new question
        questionText.textContent = "Quyidagi tugmani bosib yangi gapni eshiting";
        questionHint.textContent = "Eshitilgan gapni o'zbek tiliga tarjima qiling";
        
        input.value = '';
        charCount.textContent = '0';
        checkBtn.disabled = true;
        checkBtn.classList.remove('active');
        inputWrapper.classList.remove('correct', 'incorrect', 'focused');
        input.focus();
    });

    // Enter key support
    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !checkBtn.disabled) {
            checkBtn.click();
        }
    });

    // Initialize
    questionText.textContent = "Quyidagi tugmani bosib gapni eshiting, so'ng tarjima qiling";
    questionHint.textContent = "Avval eshitish tugmasini bosing";
</script>

</body>
</html>