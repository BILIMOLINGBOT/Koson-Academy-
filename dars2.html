<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ispan Tili - Interaktiv Test</title>
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --border-light: #2a2a2a;
            --accent-color: #58cc02; /* Duolingo yashil rang */
            --error-color: #ff4b4b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--bg-primary);
            font-family: 'Segoe UI', Roboto, sans-serif;
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            justify-content: center;
        }

        .app-container {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        /* Progress Bar */
        .progress-bar {
            height: 12px;
            background: var(--border-light);
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        #progress {
            width: 0%;
            height: 100%;
            background: var(--accent-color);
            transition: width 0.4s ease;
        }

        .top-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
        }

        .question-image { width: 80px; height: auto; }

        .speech-bubble {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-radius: 18px;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            position: relative;
            flex: 1;
        }

        /* Variantlar - Endi 3 ta */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .option-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            border-bottom: 4px solid var(--border-light);
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.1s;
            display: flex;
            align-items: center;
            min-height: 60px;
        }

        .option-card:hover { 
            background: #1a1a1a; 
            transform: translateY(-2px);
        }

        .option-card.selected {
            border-color: #3894ff;
            background: rgba(56, 148, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(56, 148, 255, 0.2);
        }

        .option-card.correct {
            border-color: var(--accent-color);
            background: rgba(88, 204, 2, 0.15);
        }

        .option-card.wrong {
            border-color: var(--error-color);
            background: rgba(255, 75, 75, 0.15);
        }

        /* Variant raqamlari */
        .option-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: var(--border-light);
            border-radius: 50%;
            margin-right: 12px;
            font-weight: 700;
            font-size: 14px;
        }

        .option-card.selected .option-number {
            background: #3894ff;
            color: white;
        }

        /* Footer */
        .footer {
            margin-top: 40px;
            padding: 20px 0;
        }

        .check-btn {
            width: 100%;
            height: 55px;
            border-radius: 15px;
            border: none;
            background: var(--border-light);
            color: var(--text-secondary);
            font-size: 18px;
            font-weight: 800;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
        }

        .check-btn.active {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 4px 0 #46a302;
        }

        .check-btn.active:hover {
            background: #4db802;
        }

        .check-btn.active:active { 
            transform: translateY(3px); 
            box-shadow: none; 
        }
        
        /* 3 ta variant uchun maxsus class */
        .three-options .option-card {
            padding: 22px;
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="progress-bar"><div id="progress"></div></div>

    <div class="top-section">
        <img src="https://image2url.com/r2/default/images/1770213716285-e701e8d5-a098-4e7d-8ffa-9f8eb938c38e.png" class="question-image">
        <div class="speech-bubble" id="questionText">Tayyormisiz?</div>
    </div>

    <div class="options-grid three-options" id="optionsContainer">
        <!-- 3 ta variant bu yerga yuklanadi -->
    </div>

    <div class="footer">
        <button class="check-btn" id="actionBtn" disabled>Tekshirish</button>
    </div>
</div>

<script>
    const questions = [
        { q: "Ispan alifbosida nechta harf bor?", o: ["26", "27", "28"], a: 1 },
        { q: "Ispan tilida nechta unli harf bor?", o: ["4", "5", "6"], a: 1 },
        { q: "“J” harfi qanday tovush beradi?", o: ["j", "h", "x"], a: 0 },
        { q: "“C” qachon “k” kabi o‘qiladi?", o: ["E, I bilan", "A, O, U bilan", "Y bilan"], a: 1 },
        { q: "“B” va “V” talaffuzi qanday?", o: ["Farq qiladi", "Bir xil", "Faqat yozuvda farq qiladi"], a: 1 }
    ];

    let currentQ = 0;
    let selectedIdx = null;

    const qText = document.getElementById('questionText');
    const optCont = document.getElementById('optionsContainer');
    const actionBtn = document.getElementById('actionBtn');
    const progress = document.getElementById('progress');

    function loadQuestion() {
        const q = questions[currentQ];
        qText.innerText = q.q;
        optCont.innerHTML = '';
        selectedIdx = null;
        actionBtn.disabled = true;
        actionBtn.innerText = "Tekshirish";
        actionBtn.classList.remove('active');
        
        q.o.forEach((opt, idx) => {
            const div = document.createElement('div');
            div.className = 'option-card';
            
            // Variant raqamini qo'shish
            const numberSpan = document.createElement('span');
            numberSpan.className = 'option-number';
            numberSpan.innerText = String.fromCharCode(65 + idx); // A, B, C
            
            const textSpan = document.createElement('span');
            textSpan.innerText = opt;
            
            div.appendChild(numberSpan);
            div.appendChild(textSpan);
            
            div.onclick = () => selectOption(idx, div);
            optCont.appendChild(div);
        });
        
        progress.style.width = `${((currentQ + 1) / questions.length) * 100}%`;
    }

    function selectOption(idx, el) {
        selectedIdx = idx;
        document.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        actionBtn.disabled = false;
        actionBtn.classList.add('active');
    }

    actionBtn.onclick = () => {
        if (actionBtn.innerText === "KEYINGI SAVOL") {
            currentQ++;
            if (currentQ < questions.length) {
                loadQuestion();
            } else {
                // Test tugadi
                const percent = Math.round((questions.filter((q, idx) => {
                    // Bu yerda foydalanuvchi javoblarini saqlash kerak
                    return true; // Hozircha oddiy versiya
                }).length / questions.length) * 100);
                
                alert(`Tabriklaymiz! Testni yakunladingiz.\nNatija: ${percent}%`);
                currentQ = 0;
                loadQuestion();
            }
            return;
        }

        const cards = document.querySelectorAll('.option-card');
        const correctIdx = questions[currentQ].a;

        // Barcha variantlarni noaktiv qilish
        cards.forEach(card => {
            card.style.pointerEvents = 'none';
        });

        if (selectedIdx === correctIdx) {
            cards[selectedIdx].classList.add('correct');
            actionBtn.innerText = "KEYINGI SAVOL";
        } else {
            cards[selectedIdx].classList.add('wrong');
            cards[correctIdx].classList.add('correct');
            actionBtn.innerText = "KEYINGI SAVOL";
        }
    };

    loadQuestion();
</script>

</body>
</html>