<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Pleer</title>
    <style>
    * { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
    }

    body { 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
        background-color: #0f0f0f; 
        color: #fff; 
        line-height: 1.5; 
        position: relative;
    }

    .container { 
        max-width: 1200px; 
        margin: 0 auto; 
        padding: 20px; 
    }

    /* BACK BUTTON */
    .back-button {
        background: #272727;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: background 0.3s;
        margin-bottom: 20px;
    }

    .back-button:hover {
        background: #333;
    }

    /* VIDEO PLAYER */
    .video-player-container {
        width: 100%;
        margin-bottom: 30px;
    }

    .video-player {
        width: 100%;
        height: 500px;
        background-color: #000;
        border-radius: 12px;
        overflow: hidden;
    }

    .video-player video {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background-color: #000;
    }

    /* VIDEO CONTROLS */
    .video-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
        padding: 0 10px;
    }

    .play-controls {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .control-btn {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        transition: background 0.3s;
    }

    .control-btn:hover {
        background: #333;
    }

    .time-display {
        font-size: 14px;
        color: #aaa;
    }

    .volume-controls {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .volume-slider {
        width: 100px;
        height: 4px;
        background: #333;
        border-radius: 2px;
        outline: none;
        -webkit-appearance: none;
    }

    .volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 12px;
        height: 12px;
        background: #fff;
        border-radius: 50%;
        cursor: pointer;
    }

    /* VIDEO INFO */
    .video-info {
        margin-bottom: 30px;
    }

    .video-title {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 15px;
        line-height: 1.4;
    }

    .video-stats {
        display: flex;
        align-items: center;
        gap: 20px;
        color: #aaa;
        font-size: 14px;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid #272727;
    }

    .actions {
        display: flex;
        align-items: center;
        gap: 15px;
        flex-wrap: wrap;
    }

    .action-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        background: #272727;
        border: none;
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
    }

    .action-btn:hover {
        background: #333;
    }

    .action-btn.active {
        background: #ff0000;
    }

    .action-btn.active svg {
        fill: white;
    }

    /* DESCRIPTION */
    .description {
        background: #1a1a1a;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
    }

    .description h3 {
        margin-bottom: 10px;
        font-size: 16px;
    }

    .description p {
        color: #ddd;
        line-height: 1.6;
        white-space: pre-wrap;
    }

    /* COMMENTS */
    .comments-section {
        margin-top: 40px;
    }

    .comments-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #272727;
    }

    .comments-title {
        font-size: 18px;
        font-weight: 600;
    }

    .add-comment {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
    }

    .comment-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #333;
        flex-shrink: 0;
    }

    .comment-input {
        flex: 1;
        background: #272727;
        border: 1px solid #333;
        border-radius: 20px;
        padding: 12px 20px;
        color: white;
        font-family: inherit;
        font-size: 14px;
        resize: none;
        min-height: 40px;
        max-height: 100px;
    }

    .comment-input:focus {
        outline: none;
        border-color: #ff0000;
    }

    .comment-submit {
        background: #ff0000;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 500;
        margin-left: 10px;
    }

    .comment-submit:hover {
        background: #cc0000;
    }

    .comment-submit:disabled {
        background: #333;
        cursor: not-allowed;
    }

    .comments-list {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .comment {
        display: flex;
        gap: 15px;
    }

    .comment-content {
        flex: 1;
    }

    .comment-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 5px;
    }

    .comment-author {
        font-weight: 600;
        font-size: 14px;
    }

    .comment-time {
        color: #aaa;
        font-size: 12px;
    }

    .comment-text {
        color: #ddd;
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 10px;
    }

    .comment-actions {
        display: flex;
        gap: 15px;
    }

    .comment-action {
        background: none;
        border: none;
        color: #aaa;
        font-size: 12px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        padding: 5px;
    }

    .comment-action:hover {
        color: white;
    }

    .no-comments {
        text-align: center;
        padding: 40px 20px;
        color: #aaa;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .video-player {
            height: 300px;
        }
        
        .video-title {
            font-size: 20px;
        }
        
        .actions {
            justify-content: center;
        }
        
        .action-btn {
            padding: 8px 15px;
            font-size: 13px;
        }
        
        .back-button {
            padding: 8px 16px;
            font-size: 14px;
        }
        
        .container {
            padding: 15px;
        }
    }

    @media (max-width: 480px) {
        .video-player {
            height: 200px;
        }
        
        .video-controls {
            flex-direction: column;
            gap: 10px;
        }
        
        .volume-controls {
            width: 100%;
        }
        
        .volume-slider {
            flex: 1;
        }
        
        .add-comment {
            flex-direction: column;
        }
        
        .comment-submit {
            margin-left: 0;
            width: 100%;
        }
    }
    </style>
</head>
<body>
  <div class="container">
    <!-- Orqaga qaytish tugmasi -->
    <button class="back-button" id="backBtn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Videolar ro'yxatiga qaytish
    </button>

    <!-- Video pleer -->
    <div class="video-player-container">
      <div class="video-player" id="videoPlayer">
        <!-- Video element bu yerga yuklanadi -->
      </div>
      
      <!-- Video controls -->
      <div class="video-controls">
        <div class="play-controls">
          <button class="control-btn" id="playBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
          </button>
          <div class="time-display" id="timeDisplay">0:00 / 0:00</div>
        </div>
        
        <div class="volume-controls">
          <button class="control-btn" id="muteBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
              <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
          </button>
          <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="1">
        </div>
      </div>
    </div>

    <!-- Video ma'lumotlari -->
    <div class="video-info">
      <h1 class="video-title" id="videoTitle"></h1>
      
      <div class="video-stats">
        <span id="videoViews">0 ko'rish</span>
        <span id="videoDate">hozirgina</span>
      </div>
      
      <div class="actions">
        <button class="action-btn" id="likeBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          <span id="likeCount">0</span>
        </button>
        
        <button class="action-btn" id="dislikeBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>
          </svg>
        </button>
        
        <button class="action-btn" id="shareBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line>
            <line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line>
          </svg>
          Ulashish
        </button>
        
        <button class="action-btn" id="saveBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
          </svg>
          Saqlash
        </button>
      </div>
    </div>

    <!-- Video tavsifi -->
    <div class="description" id="descriptionContainer">
      <h3>Video tavsifi</h3>
      <p id="videoDescription"></p>
    </div>

    <!-- Sharhlar -->
    <div class="comments-section">
      <div class="comments-header">
        <h2 class="comments-title" id="commentsCount">Sharhlar (0)</h2>
      </div>
      
      <!-- Yangi sharh qo'shish -->
      <div class="add-comment">
        <div class="comment-avatar"></div>
        <textarea class="comment-input" id="commentInput" placeholder="Sharhingizni yozing..." rows="1"></textarea>
        <button class="comment-submit" id="commentSubmit" disabled>Yuborish</button>
      </div>
      
      <!-- Sharhlar ro'yxati -->
      <div class="comments-list" id="commentsList">
        <!-- Sharhlar bu yerga yuklanadi -->
      </div>
      
      <div class="no-comments" id="noComments" style="display: none;">
        Hozircha sharhlar yo'q. Birinchi bo'lib sharh qoldiring!
      </div>
    </div>
  </div>

  <script>
    // ========== INITIALIZATION ==========
    document.addEventListener('DOMContentLoaded', function() {
      initializeVideoPage();
    });

    // ========== GLOBAL VARIABLES ==========
    let currentVideo = null;
    let videoPlayer = null;
    let isPlaying = false;
    let currentTime = 0;
    let videoDuration = 0;
    let comments = [];

    // ========== MAIN INITIALIZATION FUNCTION ==========
    function initializeVideoPage() {
      // Elementlarni tanlab olish
      const backBtn = document.getElementById('backBtn');
      const playBtn = document.getElementById('playBtn');
      const muteBtn = document.getElementById('muteBtn');
      const volumeSlider = document.getElementById('volumeSlider');
      const likeBtn = document.getElementById('likeBtn');
      const dislikeBtn = document.getElementById('dislikeBtn');
      const shareBtn = document.getElementById('shareBtn');
      const saveBtn = document.getElementById('saveBtn');
      const commentInput = document.getElementById('commentInput');
      const commentSubmit = document.getElementById('commentSubmit');
      
      // Orqaga qaytish
      backBtn.addEventListener('click', function() {
        window.location.href = 'profil.html';
      });
      
      // Video yuklash
      loadVideo();
      
      // Video pleerni yaratish
      initializeVideoPlayer();
      
      // Kontrollarni sozlash
      setupControls();
      
      // Sharhlar tizimi
      setupComments();
    }

    // ========== VIDEO LOADING ==========
    function loadVideo() {
      currentVideo = JSON.parse(localStorage.getItem('currentVideo'));
      
      if (!currentVideo) {
        // Agar video topilmasa, profilga qaytish
        window.location.href = 'profil.html';
        return;
      }
      
      // Video ma'lumotlarini ko'rsatish
      document.getElementById('videoTitle').textContent = currentVideo.title || 'Nomsiz video';
      document.getElementById('videoViews').textContent = formatNumber(currentVideo.views || 0) + ' ko\'rish';
      document.getElementById('videoDate').textContent = formatDate(currentVideo.date);
      document.getElementById('likeCount').textContent = formatNumber(currentVideo.likes || 0);
      
      // Video tavsifi
      const description = document.getElementById('videoDescription');
      if (currentVideo.description) {
        description.textContent = currentVideo.description;
      } else {
        document.getElementById('descriptionContainer').style.display = 'none';
      }
      
      // Ko'rishlar sonini oshirish
      increaseViewCount();
    }

    function formatNumber(num) {
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1).replace(/\.0$/, '') + 'M';
      }
      if (num >= 1000) {
        return (num / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
      }
      return num;
    }

    function formatDate(dateString) {
      if (!dateString) return 'hozirgina';
      
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffSec = Math.floor(diffMs / 1000);
      const diffMin = Math.floor(diffSec / 60);
      const diffHour = Math.floor(diffMin / 60);
      const diffDay = Math.floor(diffHour / 24);
      
      if (diffDay > 7) {
        return date.toLocaleDateString('uz-UZ');
      } else if (diffDay > 0) {
        return `${diffDay} kun avval`;
      } else if (diffHour > 0) {
        return `${diffHour} soat avval`;
      } else if (diffMin > 0) {
        return `${diffMin} daqiqa avval`;
      } else {
        return 'hozirgina';
      }
    }

    function increaseViewCount() {
      if (!currentVideo) return;
      
      currentVideo.views = (currentVideo.views || 0) + 1;
      
      // LocalStorage da yangilash
      let videos = JSON.parse(localStorage.getItem('userVideos')) || [];
      const videoIndex = videos.findIndex(v => v.id === currentVideo.id);
      
      if (videoIndex !== -1) {
        videos[videoIndex].views = currentVideo.views;
        localStorage.setItem('userVideos', JSON.stringify(videos));
      }
      
      // UI da yangilash
      document.getElementById('videoViews').textContent = formatNumber(currentVideo.views) + ' ko\'rish';
    }

    
    // ========== VIDEO PLAYER ==========
    function initializeVideoPlayer() {
      const videoContainer = document.getElementById('videoPlayer');
      
      if (!currentVideo || !currentVideo.videoUrl) {
        videoContainer.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #aaa;">Video topilmadi</div>';
        return;
      }
      
      // Video elementini yaratish
      videoPlayer = document.createElement('video');
      videoPlayer.src = currentVideo.videoUrl;
      videoPlayer.controls = false;
      videoPlayer.style.width = '100%';
      videoPlayer.style.height = '100%';
      videoPlayer.style.objectFit = 'contain';
      
      // Video yuklanganda
      videoPlayer.addEventListener('loadedmetadata', function() {
        videoDuration = videoPlayer.duration;
        updateTimeDisplay();
      });
      
      // Vaqt yangilanganda
      videoPlayer.addEventListener('timeupdate', function() {
        currentTime = videoPlayer.currentTime;
        updateTimeDisplay();
      });
      
      // Video tugaganda
      videoPlayer.addEventListener('ended', function() {
        isPlaying = false;
        updatePlayButton();
      });
      
      videoContainer.appendChild(videoPlayer);
    }

    function updateTimeDisplay() {
      const timeDisplay = document.getElementById('timeDisplay');
      const currentTimeFormatted = formatTime(currentTime);
      const durationFormatted = formatTime(videoDuration);
      timeDisplay.textContent = `${currentTimeFormatted} / ${durationFormatted}`;
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    // ========== CONTROLS SETUP ==========
    function setupControls() {
      const playBtn = document.getElementById('playBtn');
      const muteBtn = document.getElementById('muteBtn');
      const volumeSlider = document.getElementById('volumeSlider');
      const likeBtn = document.getElementById('likeBtn');
      const dislikeBtn = document.getElementById('dislikeBtn');
      const shareBtn = document.getElementById('shareBtn');
      const saveBtn = document.getElementById('saveBtn');
      
      // Play/Pause
      playBtn.addEventListener('click', function() {
        if (!videoPlayer) return;
        
        if (isPlaying) {
          videoPlayer.pause();
        } else {
          videoPlayer.play();
        }
        
        isPlaying = !isPlaying;
        updatePlayButton();
      });
      
      // Mute/Unmute
      muteBtn.addEventListener('click', function() {
        if (!videoPlayer) return;
        
        videoPlayer.muted = !videoPlayer.muted;
        updateMuteButton();
      });
      
      // Volume
      volumeSlider.addEventListener('input', function() {
        if (!videoPlayer) return;
        
        videoPlayer.volume = volumeSlider.value;
        updateMuteButton();
      });
      
      // Like
      likeBtn.addEventListener('click', function() {
        if (!currentVideo) return;
        
        currentVideo.likes = (currentVideo.likes || 0) + 1;
        updateLikeButton();
        
        // LocalStorage da yangilash
        updateVideoInStorage();
      });
      
      // Dislike
      dislikeBtn.addEventListener('click', function() {
        likeBtn.classList.remove('active');
        dislikeBtn.classList.add('active');
      });
      
      // Share
      shareBtn.addEventListener('click', function() {
        if (navigator.share) {
          navigator.share({
            title: currentVideo.title,
            text: currentVideo.description,
            url: window.location.href
          });
        } else {
          navigator.clipboard.writeText(window.location.href);
          alert('Havola nusxalandi!');
        }
      });
      
      // Save
      saveBtn.addEventListener('click', function() {
        saveBtn.classList.toggle('active');
        alert(saveBtn.classList.contains('active') ? 'Video saqlandi' : 'Saqlash bekor qilindi');
      });
    }

    function updatePlayButton() {
      const playBtn = document.getElementById('playBtn');
      
      if (isPlaying) {
        playBtn.innerHTML = `
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
          </svg>
        `;
      } else {
        playBtn.innerHTML = `
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        `;
      }
    }

    function updateMuteButton() {
      const muteBtn = document.getElementById('muteBtn');
      const volumeSlider = document.getElementById('volumeSlider');
      
      if (videoPlayer.muted || videoPlayer.volume === 0) {
        muteBtn.innerHTML = `
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <line x1="23" y1="9" x2="17" y2="15"></line>
            <line x1="17" y1="9" x2="23" y2="15"></line>
          </svg>
        `;
      } else {
        muteBtn.innerHTML = `
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
          </svg>
        `;
      }
      
      volumeSlider.value = videoPlayer.volume;
    }

    function updateLikeButton() {
      const likeBtn = document.getElementById('likeBtn');
      const likeCount = document.getElementById('likeCount');
      
      likeBtn.classList.add('active');
      likeCount.textContent = formatNumber(currentVideo.likes || 0);
    }

    function updateVideoInStorage() {
      let videos = JSON.parse(localStorage.getItem('userVideos')) || [];
      const videoIndex = videos.findIndex(v => v.id === currentVideo.id);
      
      if (videoIndex !== -1) {
        videos[videoIndex] = currentVideo;
        localStorage.setItem('userVideos', JSON.stringify(videos));
      }
    }

    // ========== COMMENTS SYSTEM ==========
    function setupComments() {
      const commentInput = document.getElementById('commentInput');
      const commentSubmit = document.getElementById('commentSubmit');
      
      // Comment input validation
      commentInput.addEventListener('input', function() {
        const text = commentInput.value.trim();
        commentSubmit.disabled = text.length === 0;
        
        // Auto-resize textarea
        commentInput.style.height = 'auto';
        commentInput.style.height = commentInput.scrollHeight + 'px';
      });
      
      // Enter key to submit
      commentInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          if (!commentSubmit.disabled) {
            submitComment();
          }
        }
      });
      
      // Submit button
      commentSubmit.addEventListener('click', submitComment);
      
      // Load comments
      loadComments();
    }

    function loadComments() {
      comments = JSON.parse(localStorage.getItem(`videoComments_${currentVideo.id}`)) || [];
      
      const commentsList = document.getElementById('commentsList');
      const noComments = document.getElementById('noComments');
      const commentsCount = document.getElementById('commentsCount');
      
      commentsCount.textContent = `Sharhlar (${comments.length})`;
      
      if (comments.length === 0) {
        commentsList.style.display = 'none';
        noComments.style.display = 'block';
        return;
      }
      
      commentsList.style.display = 'flex';
      noComments.style.display = 'none';
      commentsList.innerHTML = '';
      
      // Sharhlarni chiqarish
      comments.forEach((comment, index) => {
        const commentElement = createCommentElement(comment, index);
        commentsList.appendChild(commentElement);
      });
    }

    function createCommentElement(comment, index) {
      const div = document.createElement('div');
      div.className = 'comment';
      
      const avatar = document.createElement('div');
      avatar.className = 'comment-avatar';
      
      const content = document.createElement('div');
      content.className = 'comment-content';
      
      const header = document.createElement('div');
      header.className = 'comment-header';
      
      const author = document.createElement('div');
      author.className = 'comment-author';
      author.textContent = comment.author || 'Foydalanuvchi';
      
      const time = document.createElement('div');
      time.className = 'comment-time';
      time.textContent = formatDate(comment.timestamp);
      
      const text = document.createElement('div');
      text.className = 'comment-text';
      text.textContent = comment.text;
      
      const actions = document.createElement('div');
      actions.className = 'comment-actions';
      
      const likeBtn = document.createElement('button');
      likeBtn.className = 'comment-action';
      likeBtn.innerHTML = `
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        ${comment.likes || 0}
      `;
      
      likeBtn.addEventListener('click', function() {
        comment.likes = (comment.likes || 0) + 1;
        likeBtn.innerHTML = `
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#ff0000" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          ${comment.likes}
        `;
        saveComments();
      });
      
      const replyBtn = document.createElement('button');
      replyBtn.className = 'comment-action';
      replyBtn.textContent = 'Javob berish';
      
      header.appendChild(author);
      header.appendChild(time);
      
      actions.appendChild(likeBtn);
      actions.appendChild(replyBtn);
      
      content.appendChild(header);
      content.appendChild(text);
      content.appendChild(actions);
      
      div.appendChild(avatar);
      div.appendChild(content);
      
      return div;
    }

    function submitComment() {
      const commentInput = document.getElementById('commentInput');
      const text = commentInput.value.trim();
      
      if (!text) return;
      
      const newComment = {
        id: Date.now(),
        text: text,
        author: 'Siz',
        timestamp: new Date().toISOString(),
        likes: 0
      };
      
      comments.unshift(newComment);
      saveComments();
      
      // Inputni tozalash
      commentInput.value = '';
      commentInput.style.height = 'auto';
      document.getElementById('commentSubmit').disabled = true;
      
      // UI ni yangilash
      loadComments();
    }

    function saveComments() {
      localStorage.setItem(`videoComments_${currentVideo.id}`, JSON.stringify(comments));
    }
  </script>
</body>
</html>