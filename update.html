<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yangi Video Yuklash</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #000;
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .upload-container {
            width: 100%;
            max-width: 800px;
            background: #1a1a1a;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }

        /* HEADER */
        .upload-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px 30px;
            position: relative;
            overflow: hidden;
        }

        .upload-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.4));
        }

        .header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(-3px);
        }

        .header-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            flex-grow: 1;
        }

        /* MAIN CONTENT */
        .upload-content {
            padding: 40px;
        }

        /* UPLOAD AREA */
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 50px 30px;
            text-align: center;
            margin-bottom: 40px;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #764ba2;
            transform: translateY(-2px);
        }

        .upload-area.drag-over {
            background: rgba(102, 126, 234, 0.2);
            border-color: #4caf50;
            border-style: solid;
        }

        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: #667eea;
        }

        .upload-text {
            font-size: 18px;
            margin-bottom: 15px;
            color: #fff;
        }

        .upload-subtext {
            color: #888;
            font-size: 14px;
            margin-bottom: 25px;
        }

        .select-video-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .select-video-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* VIDEO PREVIEW */
        .video-preview {
            display: none;
            margin-bottom: 30px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .video-preview video {
            width: 100%;
            border-radius: 15px;
            display: block;
        }

        .video-info {
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 0 0 15px 15px;
            margin-top: -4px;
        }

        .video-filename {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .video-details {
            color: #888;
            font-size: 14px;
            display: flex;
            gap: 15px;
        }

        .remove-video {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,0,0,0.8);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .remove-video:hover {
            background: rgba(255,0,0,1);
            transform: scale(1.1);
        }

        /* FORM FIELDS */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #fff;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            background: #222;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 15px;
            color: #fff;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
            background: #2a2a2a;
        }

        /* PROGRESS BAR */
        .upload-progress {
            display: none;
            background: #222;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #333;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-title {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
        }

        .progress-percent {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .progress-bar-container {
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            color: #888;
            font-size: 14px;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* SUCCESS MESSAGE */
        .success-message {
            display: none;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(76, 175, 80, 0.05) 100%);
            border: 2px solid #4caf50;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
        }

        .success-icon {
            font-size: 60px;
            color: #4caf50;
            margin-bottom: 20px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .success-title {
            font-size: 24px;
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 15px;
        }

        .success-text {
            color: #888;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .success-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .success-btn {
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 15px;
        }

        .view-video-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .back-profile-btn {
            background: #333;
            color: white;
        }

        .success-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* UPLOAD BUTTON */
        .upload-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin-top: 20px;
        }

        .upload-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .upload-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* FILE INPUT */
        #videoFileInput {
            display: none;
        }

        /* LOADING SPINNER */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .upload-content {
                padding: 25px;
            }
            
            .upload-header {
                padding: 20px;
            }
            
            .header-title {
                font-size: 20px;
            }
            
            .upload-area {
                padding: 30px 20px;
            }
            
            .success-actions {
                flex-direction: column;
            }
            
            .success-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .upload-content {
                padding: 20px;
            }
            
            .upload-area {
                padding: 25px 15px;
            }
            
            .upload-icon {
                font-size: 50px;
            }
            
            .upload-text {
                font-size: 16px;
            }
            
            .select-video-btn {
                padding: 12px 30px;
                font-size: 15px;
            }
            
            .form-group input,
            .form-group textarea {
                padding: 12px;
                font-size: 15px;
            }
            
            .upload-btn {
                padding: 15px 30px;
                font-size: 16px;
            }
        }

        /* DRAG OVERLAY */
        .drag-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(102, 126, 234, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            border-radius: 12px;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .upload-area.drag-over .drag-overlay {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="upload-container">
        <!-- HEADER -->
        <div class="upload-header">
            <div class="header-content">
                <button class="back-btn" id="backBtn">
                    <span>‚Üê</span> Orqaga
                </button>
                <div class="header-title">Yangi Video Yuklash</div>
                <div style="width: 90px;"></div> <!-- Spacer -->
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="upload-content">
            <!-- UPLOAD AREA -->
            <div class="upload-area" id="uploadArea">
                <div class="drag-overlay">Videoni bu yerga tashlang</div>
                <div class="upload-icon">üìπ</div>
                <div class="upload-text">Video faylni tanlang yoki bu yerga sudrab tashlang</div>
                <div class="upload-subtext">MP4, AVI, MOV formatlari, maksimal hajmi 500MB</div>
                <button class="select-video-btn" id="selectVideoBtn">
                    <span>üìÇ</span> Video Tanlash
                </button>
            </div>

            <!-- VIDEO PREVIEW -->
            <div class="video-preview" id="videoPreview">
                <video id="videoPlayer" controls></video>
                <button class="remove-video" id="removeVideoBtn">√ó</button>
                <div class="video-info">
                    <div class="video-filename" id="videoFilename"></div>
                    <div class="video-details">
                        <span id="videoSize"></span>
                        <span id="videoDuration"></span>
                        <span id="videoResolution"></span>
                    </div>
                </div>
            </div>

            <!-- FORM FIELDS -->
            <div class="form-group">
                <label for="videoTitle">üìù Video sarlavhasi</label>
                <input type="text" id="videoTitle" placeholder="Video sarlavhasini kiriting..." maxlength="100">
            </div>

            <div class="form-group">
                <label for="videoDescription">üìÑ Video tavsifi</label>
                <textarea id="videoDescription" placeholder="Video haqida batafsil ma'lumot bering..."></textarea>
            </div>

            <div class="form-group">
                <label for="videoTags">üè∑Ô∏è Kalit so'zlar</label>
                <input type="text" id="videoTags" placeholder="musiqa, kontsert, 2025, o'zbekiston (vergul bilan ajratilgan)">
            </div>

            <!-- UPLOAD PROGRESS -->
            <div class="upload-progress" id="uploadProgress">
                <div class="progress-header">
                    <div class="progress-title">Video yuklanmoqda...</div>
                    <div class="progress-percent" id="progressPercent">0%</div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                </div>
                <div class="progress-info">
                    <span id="uploadedSize">0 MB</span>
                    <span id="remainingTime">Taxminiy vaqt: 30s</span>
                </div>
            </div>

            <!-- SUCCESS MESSAGE -->
            <div class="success-message" id="successMessage">
                <div class="success-icon">‚úÖ</div>
                <div class="success-title">Video muvaffaqiyatli yuklandi!</div>
                <div class="success-text">
                    Sizning video profilingizga qo'shildi va endi tomosha qilish mumkin.
                </div>
                <div class="success-actions">
                    <button class="success-btn view-video-btn" id="viewVideoBtn">Videoni ko'rish</button>
                    <button class="success-btn back-profile-btn" id="backToProfileBtn">Profilga qaytish</button>
                </div>
            </div>

            <!-- UPLOAD BUTTON -->
            <button class="upload-btn" id="uploadBtn" disabled>
                <span id="uploadBtnText">üì§ Videoni Yuklash</span>
            </button>
        </div>
    </div>

    <!-- HIDDEN FILE INPUT -->
    <input type="file" id="videoFileInput" accept="video/*">

    
    <script>
        // DOM elementlari
        const uploadArea = document.getElementById('uploadArea');
        const selectVideoBtn = document.getElementById('selectVideoBtn');
        const videoFileInput = document.getElementById('videoFileInput');
        const videoPreview = document.getElementById('videoPreview');
        const videoPlayer = document.getElementById('videoPlayer');
        const removeVideoBtn = document.getElementById('removeVideoBtn');
        const videoFilename = document.getElementById('videoFilename');
        const videoSize = document.getElementById('videoSize');
        const videoDuration = document.getElementById('videoDuration');
        const videoResolution = document.getElementById('videoResolution');
        const videoTitle = document.getElementById('videoTitle');
        const videoDescription = document.getElementById('videoDescription');
        const videoTags = document.getElementById('videoTags');
        const uploadBtn = document.getElementById('uploadBtn');
        const uploadBtnText = document.getElementById('uploadBtnText');
        const uploadProgress = document.getElementById('uploadProgress');
        const progressPercent = document.getElementById('progressPercent');
        const progressBarFill = document.getElementById('progressBarFill');
        const uploadedSize = document.getElementById('uploadedSize');
        const remainingTime = document.getElementById('remainingTime');
        const successMessage = document.getElementById('successMessage');
        const viewVideoBtn = document.getElementById('viewVideoBtn');
        const backToProfileBtn = document.getElementById('backToProfileBtn');
        const backBtn = document.getElementById('backBtn');

        // O'zgaruvchilar
        let selectedFile = null;
        let isUploading = false;

        // Dastlabki yuklash
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            setupDragAndDrop();
        });

        // Event listenerlarni sozlash
        function setupEventListeners() {
            // Video tanlash
            selectVideoBtn.addEventListener('click', () => videoFileInput.click());
            videoFileInput.addEventListener('change', handleFileSelect);

            // Video olib tashlash
            removeVideoBtn.addEventListener('click', resetFileSelection);

            // Form inputlari
            videoTitle.addEventListener('input', validateForm);
            videoDescription.addEventListener('input', validateForm);

            // Yuklash tugmasi
            uploadBtn.addEventListener('click', startUpload);

            // Orqaga tugmalari
            backBtn.addEventListener('click', () => window.location.href = 'profil.html');
            backToProfileBtn.addEventListener('click', () => window.location.href = 'profil.html');
            viewVideoBtn.addEventListener('click', () => window.location.href = 'videopage.html');

            // Escape tugmasi
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !isUploading) {
                    window.location.href = 'profil.html';
                }
            });
        }

        // Drag and drop ni sozlash
        function setupDragAndDrop() {
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });

            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            });
        }

        // Fayl tanlash
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        // Faylni qayta ishlash
        function handleFile(file) {
            // Fayl turini tekshirish
            if (!file.type.startsWith('video/')) {
                alert('Iltimos, faqat video fayllarni tanlang!');
                return;
            }

            // Fayl hajmini tekshirish (500MB)
            if (file.size > 500 * 1024 * 1024) {
                alert('Fayl hajmi 500MB dan oshmasligi kerak!');
                return;
            }

            selectedFile = file;
            
            // Fayl ma'lumotlarini ko'rsatish
            videoFilename.textContent = file.name;
            videoSize.textContent = formatFileSize(file.size);
            
            // Video preview ni ko'rsatish
            const url = URL.createObjectURL(file);
            videoPlayer.src = url;
            videoPreview.style.display = 'block';
            
            // Video ma'lumotlarini olish
            videoPlayer.onloadedmetadata = () => {
                videoDuration.textContent = formatDuration(videoPlayer.duration);
                videoResolution.textContent = `${videoPlayer.videoWidth}x${videoPlayer.videoHeight}`;
                
                // 16:9 formatini tekshirish
                const ratio = videoPlayer.videoWidth / videoPlayer.videoHeight;
                const targetRatio = 16/9;
                
                if (Math.abs(ratio - targetRatio) > 0.1) {
                    const confirmUpload = confirm(
                        `Video formati 16:9 emas (${videoPlayer.videoWidth}x${videoPlayer.videoHeight}).\n` +
                        `Davom etishni istaysizmi?`
                    );
                    
                    if (!confirmUpload) {
                        resetFileSelection();
                        return;
                    }
                }
            };

            // Formani tekshirish
            validateForm();
        }

        // Fayl hajmini formatlash
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // Davomiylikni formatlash
        function formatDuration(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Fayl tanlashni bekor qilish
        function resetFileSelection() {
            selectedFile = null;
            videoFileInput.value = '';
            videoPreview.style.display = 'none';
            videoPlayer.src = '';
            validateForm();
        }

        // Formani tekshirish
        function validateForm() {
            const titleValid = videoTitle.value.trim().length >= 5;
            const descriptionValid = videoDescription.value.trim().length >= 10;
            const fileValid = selectedFile !== null;
            
            uploadBtn.disabled = !(titleValid && descriptionValid && fileValid);
        }

        // Yuklashni boshlash
        function startUpload() {
            if (isUploading) return;
            
            const title = videoTitle.value.trim();
            const description = videoDescription.value.trim();
            const tags = videoTags.value.split(',').map(tag => tag.trim()).filter(tag => tag);
            
            // Video ma'lumotlarini yaratish
            const videoData = {
                id: Date.now(),
                title: title,
                description: description,
                tags: tags,
                thumbnail: getRandomThumbnail(),
                views: "0",
                likes: "0",
                duration: videoDuration.textContent,
                timeAgo: "hozirgina",
                uploadedAt: new Date().toISOString(),
                fileName: selectedFile.name,
                fileSize: formatFileSize(selectedFile.size),
                status: 'uploading',
                startTime: Date.now(),
                totalTime: 30000, // 30 soniya
                progress: 0
            };
            
            // Yuklashni boshlash
            isUploading = true;
            uploadBtn.disabled = true;
            uploadBtnText.innerHTML = '<div class="loading-spinner"></div> Yuklanmoqda...';
            uploadProgress.style.display = 'block';
            
            // Progress simulyatsiyasi
            simulateUpload(videoData);
        }

        // Tasodifiy thumbnail olish
        function getRandomThumbnail() {
            const thumbnails = [
                'https://images.unsplash.com/photo-1571330735066-03aaa9429d89?auto=format&fit=crop&w=500&q=80',
                'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?auto=format&fit=crop&w=500&q=80',
                'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?auto=format&fit=crop&w=500&q=80',
                'https://images.unsplash.com/photo-1513326738677-b964603b136d?auto=format&fit=crop&w=500&q=80'
            ];
            return thumbnails[Math.floor(Math.random() * thumbnails.length)];
        }

        // Yuklashni simulyatsiya qilish
        function simulateUpload(videoData) {
            let progress = 0;
            const totalTime = videoData.totalTime;
            const interval = 100; // 100ms
            const increment = (interval / totalTime) * 100;
            
            const uploadInterval = setInterval(() => {
                progress += increment;
                
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(uploadInterval);
                    completeUpload(videoData);
                }
                
                // Progressni yangilash
                progressPercent.textContent = Math.floor(progress) + '%';
                progressBarFill.style.width = progress + '%';
                
                // O'lcham va vaqtni hisoblash
                const uploadedBytes = (selectedFile.size * progress) / 100;
                uploadedSize.textContent = formatFileSize(uploadedBytes);
                
                const remainingSeconds = Math.max(0, (totalTime * (100 - progress)) / 100 / 1000);
                remainingTime.textContent = `Taxminiy vaqt: ${Math.ceil(remainingSeconds)}s`;
                
                // Video ma'lumotlarini yangilash
                videoData.progress = Math.floor(progress);
                
            }, interval);
        }

        // Yuklashni tugatish
        function completeUpload(videoData) {
            // Video statusini yangilash
            videoData.status = 'uploaded';
            videoData.completed = true;
            delete videoData.startTime;
            delete videoData.totalTime;
            delete videoData.progress;
            
            // localStorage dan mavjud videolarni olish
            let videos = JSON.parse(localStorage.getItem('videos')) || [];
            
            // Yangi videoni qo'shish
            videos.push(videoData);
            
            // localStorage ga saqlash
            localStorage.setItem('videos', JSON.stringify(videos));
            localStorage.setItem('currentVideo', JSON.stringify(videoData));
            
            // Yuklash tugmasi holatini yangilash
            isUploading = false;
            uploadBtnText.textContent = 'üì§ Videoni Yuklash';
            
            // Progressni yashirish
            uploadProgress.style.display = 'none';
            
            // Muvaffaqiyat xabarini ko'rsatish
            successMessage.style.display = 'block';
            
            // Ovoz chiqarish
            playSuccessSound();
        }

        // Muvaffaqiyat ovozini chiqarish
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log("Audio context not supported");
            }
        }
    </script>
</body>
</html>