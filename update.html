<!-- update.html -->
<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yangi Video Yuklash</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    body {
      background-color: #000;
      color: #fff;
      display: flex;
      justify-content: center;
    }

    .video-modal-content {
      background-color: #000;
      width: 600px;
      border-radius: 16px;
      border: 1px solid #2f3336;
      overflow: hidden;
      margin: 20px auto;
    }

    .video-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid #2f3336;
    }

    .video-cancel-btn, .video-post-btn {
      background: none;
      border: none;
      color: #1da1f2;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .video-post-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .video-modal-title {
      font-size: 18px;
      font-weight: 700;
    }

    .video-form-container {
      padding: 15px;
    }

    .video-preview {
      width: 100%;
      height: 300px;
      background-color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
      border-radius: 8px;
      overflow: hidden;
    }

    .video-preview video {
      max-width: 100%;
      max-height: 100%;
    }

    .video-form-group {
      margin-bottom: 20px;
    }

    .video-form-group label {
      display: block;
      margin-bottom: 5px;
      color: #8b98a5;
      font-size: 14px;
    }

    .video-form-group input,
    .video-form-group textarea,
    .video-form-group select {
      width: 100%;
      background-color: transparent;
      border: 1px solid #333;
      border-radius: 4px;
      padding: 10px;
      color: #fff;
      font-size: 16px;
    }

    .video-form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .video-form-group select {
      appearance: none;
    }

    .video-form-group input:focus,
    .video-form-group textarea:focus,
    .video-form-group select:focus {
      border-color: #1da1f2;
      outline: none;
    }

    .upload-video-btn {
      background-color: #1da1f2;
      color: #fff;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.2s;
      display: block;
      margin: 0 auto;
    }

    .upload-video-btn:hover {
      background-color: #0c84d1;
    }

    /* Pleylit yaratish qismi */
    .playlist-group {
      display: flex;
      align-items: flex-end;
      gap: 10px;
    }

    .playlist-group select {
      flex: 1;
    }

    .playlist-group input {
      flex: 1;
      display: none;
    }

    .create-playlist-btn {
      background-color: #1da1f2;
      color: #fff;
      border: none;
      border-radius: 20px;
      padding: 10px 16px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .create-playlist-btn:hover {
      background-color: #0c84d1;
    }

    @media (max-width: 640px) {
      .video-modal-content {
        width: 95%;
      }
    }
  </style>
</head>
<body>

  <div class="video-modal-content">
    <div class="video-modal-header">
      <button class="video-cancel-btn" id="videoCancelBtn">Bekor qilish</button>
      <div class="video-modal-title">Yangi video yuklash</div>
      <button class="video-post-btn" id="videoPostBtn" disabled>Saqlash</button>
    </div>
    <div class="video-form-container">
      <div class="video-form-group">
        <label>Video</label>
        <div class="video-preview" id="videoPreview">
          <button class="upload-video-btn" id="uploadVideoBtn">Video yuklash</button>
        </div>
      </div>
      <div class="video-form-group">
        <label for="videoTitle">Sarlavha yozing</label>
        <input type="text" id="videoTitle" placeholder="Video sarlavhasi...">
      </div>
      <div class="video-form-group">
        <label for="videoKeywords">Kalit soʻzlar</label>
        <input type="text" id="videoKeywords" placeholder="Kalit so'zlar, vergul bilan ajratilgan...">
      </div>
      <div class="video-form-group">
        <label>Pleylitni tanlang</label>
        <div class="playlist-group">
          <select id="videoPlaylist">
            <option value="">Pleylit tanlang</option>
            <option value="playlist1">Pleylit 1</option>
            <option value="playlist2">Pleylit 2</option>
            <option value="playlist3">Pleylit 3</option>
          </select>
          <button class="create-playlist-btn" id="createPlaylistBtn">Yangi</button>
          <input type="text" id="newPlaylistName" placeholder="Yangi pleylit nomi...">
          <button class="create-playlist-btn" id="addPlaylistBtn" style="display: none;">Qoʻshish</button>
        </div>
      </div>
    </div>
  </div>

  <input type="file" id="videoInput" accept="video/*">

  <script>
    const videoCancelBtn = document.getElementById('videoCancelBtn');
    const videoPostBtn = document.getElementById('videoPostBtn');
    const uploadVideoBtn = document.getElementById('uploadVideoBtn');
    const videoInput = document.getElementById('videoInput');
    const videoPreview = document.getElementById('videoPreview');
    const videoTitle = document.getElementById('videoTitle');
    const videoKeywords = document.getElementById('videoKeywords');
    const videoPlaylist = document.getElementById('videoPlaylist');
    const createPlaylistBtn = document.getElementById('createPlaylistBtn');
    const addPlaylistBtn = document.getElementById('addPlaylistBtn');
    const newPlaylistName = document.getElementById('newPlaylistName');

    // Yuklash tugmasi
    uploadVideoBtn.addEventListener('click', () => videoInput.click());

    videoInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          const videoElement = document.createElement('video');
          videoElement.src = ev.target.result;
          videoElement.controls = true;
          videoPreview.innerHTML = '';
          videoPreview.appendChild(videoElement);
          videoPostBtn.disabled = false;
        };
        reader.readAsDataURL(file);
      }
    });

    // Pleylit yaratish
    createPlaylistBtn.addEventListener('click', () => {
      if (newPlaylistName.style.display === 'none') {
        newPlaylistName.style.display = 'block';
        addPlaylistBtn.style.display = 'block';
        createPlaylistBtn.textContent = 'Bekor';
      } else {
        newPlaylistName.style.display = 'none';
        addPlaylistBtn.style.display = 'none';
        createPlaylistBtn.textContent = 'Yangi';
      }
    });

    addPlaylistBtn.addEventListener('click', () => {
      const newName = newPlaylistName.value.trim();
      if (newName) {
        const newValue = newName.toLowerCase().replace(/\s+/g, '_');
        const option = document.createElement('option');
        option.value = newValue;
        option.textContent = newName;
        videoPlaylist.appendChild(option);
        videoPlaylist.value = newValue;
        newPlaylistName.value = '';
        newPlaylistName.style.display = 'none';
        addPlaylistBtn.style.display = 'none';
        createPlaylistBtn.textContent = 'Yangi';
      }
    });

    // Bekor qilish
    videoCancelBtn.addEventListener('click', () => {
      window.location.href = 'profil.html';
    });

    // Saqlash
    videoPostBtn.addEventListener('click', () => {
      console.log('Video yuklandi:', {
        file: videoInput.files[0],
        title: videoTitle.value,
        keywords: videoKeywords.value,
        playlist: videoPlaylist.value
      });
      alert('Video yuklandi! (Demo: Console ni tekshiring)');
      window.location.href = 'profil.html';
    });
  </script>

</body>
</html>